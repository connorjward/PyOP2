
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pyop2 package &#8212; PyOP2 2020.0 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pyop2.codegen package" href="pyop2.codegen.html" />
    <link rel="prev" title="pyop2 user documentation" href="user.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pyop2.codegen.html" title="pyop2.codegen package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="user.html" title="pyop2 user documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PyOP2 2020.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">pyop2 package</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pyop2-package">
<h1>pyop2 package<a class="headerlink" href="#pyop2-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="pyop2.codegen.html">pyop2.codegen package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pyop2.codegen.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyop2.codegen.html#module-pyop2.codegen.builder">pyop2.codegen.builder module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyop2.codegen.html#module-pyop2.codegen.node">pyop2.codegen.node module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyop2.codegen.html#module-pyop2.codegen.optimise">pyop2.codegen.optimise module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyop2.codegen.html#module-pyop2.codegen.rep2loopy">pyop2.codegen.rep2loopy module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyop2.codegen.html#module-pyop2.codegen.representation">pyop2.codegen.representation module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyop2.codegen.html#module-pyop2.codegen">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-pyop2.base">
<span id="pyop2-base-module"></span><h2>pyop2.base module<a class="headerlink" href="#module-pyop2.base" title="Permalink to this headline">¶</a></h2>
<p>Base classes for OP2 objects, containing metadata and runtime data
information which is backend independent. Individual runtime backends should
subclass these as required to implement backend-specific features.</p>
<dl class="py function">
<dt id="pyop2.base.timed_region">
<code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">timed_region</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.timed_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Log.Event(type cls, name, klass=None)</p>
</dd></dl>

<dl class="py class">
<dt id="pyop2.base.Access">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">Access</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Access" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.IntEnum</span></code></p>
<p>An enumeration.</p>
<dl class="py attribute">
<dt id="pyop2.base.Access.READ">
<code class="sig-name descname">READ</code><em class="property"> = 1</em><a class="headerlink" href="#pyop2.base.Access.READ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Access.WRITE">
<code class="sig-name descname">WRITE</code><em class="property"> = 2</em><a class="headerlink" href="#pyop2.base.Access.WRITE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Access.RW">
<code class="sig-name descname">RW</code><em class="property"> = 3</em><a class="headerlink" href="#pyop2.base.Access.RW" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Access.INC">
<code class="sig-name descname">INC</code><em class="property"> = 4</em><a class="headerlink" href="#pyop2.base.Access.INC" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Access.MIN">
<code class="sig-name descname">MIN</code><em class="property"> = 5</em><a class="headerlink" href="#pyop2.base.Access.MIN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Access.MAX">
<code class="sig-name descname">MAX</code><em class="property"> = 6</em><a class="headerlink" href="#pyop2.base.Access.MAX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py data">
<dt id="pyop2.base.READ">
<code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">READ</code><em class="property"> = &lt;Access.READ: 1&gt;</em><a class="headerlink" href="#pyop2.base.READ" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a>, <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>, or <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a> is accessed read-only.</p>
</dd></dl>

<dl class="py data">
<dt id="pyop2.base.WRITE">
<code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">WRITE</code><em class="property"> = &lt;Access.WRITE: 2&gt;</em><a class="headerlink" href="#pyop2.base.WRITE" title="Permalink to this definition">¶</a></dt>
<dd><p>The  <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a>, <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>, or <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a> is accessed write-only,
and OP2 is not required to handle write conflicts.</p>
</dd></dl>

<dl class="py data">
<dt id="pyop2.base.RW">
<code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">RW</code><em class="property"> = &lt;Access.RW: 3&gt;</em><a class="headerlink" href="#pyop2.base.RW" title="Permalink to this definition">¶</a></dt>
<dd><p>The  <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a>, <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>, or <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a> is accessed for reading
and writing, and OP2 is not required to handle write conflicts.</p>
</dd></dl>

<dl class="py data">
<dt id="pyop2.base.INC">
<code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">INC</code><em class="property"> = &lt;Access.INC: 4&gt;</em><a class="headerlink" href="#pyop2.base.INC" title="Permalink to this definition">¶</a></dt>
<dd><p>The kernel computes increments to be summed onto a <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a>,
<a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>, or <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a>. OP2 is responsible for managing the write
conflicts caused.</p>
</dd></dl>

<dl class="py data">
<dt id="pyop2.base.MIN">
<code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">MIN</code><em class="property"> = &lt;Access.MIN: 5&gt;</em><a class="headerlink" href="#pyop2.base.MIN" title="Permalink to this definition">¶</a></dt>
<dd><p>The kernel contributes to a reduction into a <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a> using a <code class="docutils literal notranslate"><span class="pre">min</span></code>
operation. OP2 is responsible for reducing over the different kernel
invocations.</p>
</dd></dl>

<dl class="py data">
<dt id="pyop2.base.MAX">
<code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">MAX</code><em class="property"> = &lt;Access.MAX: 6&gt;</em><a class="headerlink" href="#pyop2.base.MAX" title="Permalink to this definition">¶</a></dt>
<dd><p>The kernel contributes to a reduction into a <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a> using a <code class="docutils literal notranslate"><span class="pre">max</span></code>
operation. OP2 is responsible for reducing over the different kernel
invocations.</p>
</dd></dl>

<dl class="py class">
<dt id="pyop2.base.Arg">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">Arg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">map</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">access</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">lgmaps</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unroll_map</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Arg" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An argument to a <a class="reference internal" href="#pyop2.op2.par_loop" title="pyop2.op2.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyop2.op2.par_loop()</span></code></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>User code should not directly instantiate <a class="reference internal" href="#pyop2.base.Arg" title="pyop2.base.Arg"><code class="xref py py-class docutils literal notranslate"><span class="pre">Arg</span></code></a>.
Instead, use the call syntax on the <a class="reference internal" href="#pyop2.base.DataCarrier" title="pyop2.base.DataCarrier"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataCarrier</span></code></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – A data-carrying object, either <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> or class:<cite>Mat</cite></p></li>
<li><p><strong>map</strong> – A <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> to access this <a class="reference internal" href="#pyop2.base.Arg" title="pyop2.base.Arg"><code class="xref py py-class docutils literal notranslate"><span class="pre">Arg</span></code></a> or the default
if the identity map is to be used.</p></li>
<li><p><strong>access</strong> – An access descriptor of type <a class="reference internal" href="#pyop2.base.Access" title="pyop2.base.Access"><code class="xref py py-class docutils literal notranslate"><span class="pre">Access</span></code></a></p></li>
<li><p><strong>lgmaps</strong> – For <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a> objects, a tuple of 2-tuples of local to
global maps used during assembly.</p></li>
</ul>
</dd>
</dl>
<p>Checks that:</p>
<ol class="arabic simple">
<li><p>the maps used are initialized i.e. have mapping data associated, and</p></li>
<li><p>the to Set of the map used to access it matches the Set it is
defined on.</p></li>
</ol>
<p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">MapValueError</span></code> is raised if these conditions are not met.</p>
<dl class="py attribute">
<dt id="pyop2.base.Arg.split">
<code class="sig-name descname">split</code><a class="headerlink" href="#pyop2.base.Arg.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Split a mixed argument into a tuple of constituent arguments.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Arg.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.base.Arg.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The generated argument name.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Arg.ctype">
<code class="sig-name descname">ctype</code><a class="headerlink" href="#pyop2.base.Arg.ctype" title="Permalink to this definition">¶</a></dt>
<dd><p>String representing the C type of the data in this <code class="docutils literal notranslate"><span class="pre">Arg</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Arg.dtype">
<code class="sig-name descname">dtype</code><a class="headerlink" href="#pyop2.base.Arg.dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>Numpy datatype of this Arg</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Arg.map">
<code class="sig-name descname">map</code><a class="headerlink" href="#pyop2.base.Arg.map" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> via which the data is to be accessed.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Arg.access">
<code class="sig-name descname">access</code><a class="headerlink" href="#pyop2.base.Arg.access" title="Permalink to this definition">¶</a></dt>
<dd><p>Access descriptor. One of the constants of type <a class="reference internal" href="#pyop2.base.Access" title="pyop2.base.Access"><code class="xref py py-class docutils literal notranslate"><span class="pre">Access</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Arg.global_to_local_begin">
<code class="sig-name descname">global_to_local_begin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Arg.global_to_local_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin halo exchange for the argument if a halo update is required.
Doing halo exchanges only makes sense for <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> objects.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Arg.global_to_local_end">
<code class="sig-name descname">global_to_local_end</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Arg.global_to_local_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Finish halo exchange for the argument if a halo update is required.
Doing halo exchanges only makes sense for <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> objects.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Arg.local_to_global_begin">
<code class="sig-name descname">local_to_global_begin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Arg.local_to_global_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Arg.local_to_global_end">
<code class="sig-name descname">local_to_global_end</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Arg.local_to_global_end" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Arg.reduction_begin">
<code class="sig-name descname">reduction_begin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">comm</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Arg.reduction_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin reduction for the argument if its access is INC, MIN, or MAX.
Doing a reduction only makes sense for <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a> objects.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Arg.reduction_end">
<code class="sig-name descname">reduction_end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">comm</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Arg.reduction_end" title="Permalink to this definition">¶</a></dt>
<dd><p>End reduction for the argument if it is in flight.
Doing a reduction only makes sense for <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a> objects.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.Set">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">Set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">halo</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Set" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>OP2 set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>integer</em><em> or </em><em>list of four integers.</em>) – The size of the set.</p></li>
<li><p><strong>name</strong> (<em>string</em>) – The name of the set (optional).</p></li>
<li><p><strong>halo</strong> – An exisiting halo to use (optional).</p></li>
</ul>
</dd>
</dl>
<p>When the set is employed as an iteration space in a
<a class="reference internal" href="#pyop2.op2.par_loop" title="pyop2.op2.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyop2.op2.par_loop()</span></code></a>, the extent of any local iteration space within
each set entry is indicated in brackets. See the example in
<a class="reference internal" href="#pyop2.op2.par_loop" title="pyop2.op2.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyop2.op2.par_loop()</span></code></a> for more details.</p>
<p>The size of the set can either be an integer, or a list of four
integers.  The latter case is used for running in parallel where
we distinguish between:</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>CORE</cite> (owned and not touching halo)</p></li>
<li><p><cite>OWNED</cite> (owned, touching halo)</p></li>
<li><p><cite>EXECUTE HALO</cite> (not owned, but executed over redundantly)</p></li>
<li><p><cite>NON EXECUTE HALO</cite> (not owned, read when executing in the execute halo)</p></li>
</ul>
</div></blockquote>
<p>If a single integer is passed, we assume that we’re running in
serial and there is no distinction.</p>
<p>The division of set elements is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">CORE</span><span class="p">)</span>
<span class="p">[</span><span class="n">CORE</span><span class="p">,</span> <span class="n">OWNED</span><span class="p">)</span>
<span class="p">[</span><span class="n">OWNED</span><span class="p">,</span> <span class="n">GHOST</span><span class="p">)</span>
</pre></div>
</div>
<p>Halo send/receive data is stored on sets in a <a class="reference internal" href="#pyop2.base.Halo" title="pyop2.base.Halo"><code class="xref py py-class docutils literal notranslate"><span class="pre">Halo</span></code></a>.</p>
<dl class="py attribute">
<dt id="pyop2.base.Set.core_size">
<code class="sig-name descname">core_size</code><a class="headerlink" href="#pyop2.base.Set.core_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Core set size.  Owned elements not touching halo elements.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Set.size">
<code class="sig-name descname">size</code><a class="headerlink" href="#pyop2.base.Set.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Set size, owned elements.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Set.total_size">
<code class="sig-name descname">total_size</code><a class="headerlink" href="#pyop2.base.Set.total_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Set size including ghost elements.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Set.sizes">
<code class="sig-name descname">sizes</code><a class="headerlink" href="#pyop2.base.Set.sizes" title="Permalink to this definition">¶</a></dt>
<dd><p>Set sizes: core, owned, execute halo, total.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Set.core_part">
<code class="sig-name descname">core_part</code><a class="headerlink" href="#pyop2.base.Set.core_part" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Set.owned_part">
<code class="sig-name descname">owned_part</code><a class="headerlink" href="#pyop2.base.Set.owned_part" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Set.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.base.Set.name" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined label</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Set.halo">
<code class="sig-name descname">halo</code><a class="headerlink" href="#pyop2.base.Set.halo" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.base.Halo" title="pyop2.base.Halo"><code class="xref py py-class docutils literal notranslate"><span class="pre">Halo</span></code></a> associated with this Set</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Set.partition_size">
<em class="property">property </em><code class="sig-name descname">partition_size</code><a class="headerlink" href="#pyop2.base.Set.partition_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Default partition size</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Set.layers">
<code class="sig-name descname">layers</code><a class="headerlink" href="#pyop2.base.Set.layers" title="Permalink to this definition">¶</a></dt>
<dd><p>Return None (not an <a class="reference internal" href="#pyop2.base.ExtrudedSet" title="pyop2.base.ExtrudedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtrudedSet</span></code></a>).</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.GlobalSet">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">GlobalSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.GlobalSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Set</span></code></a></p>
<dl class="py attribute">
<dt id="pyop2.base.GlobalSet.core_size">
<code class="sig-name descname">core_size</code><a class="headerlink" href="#pyop2.base.GlobalSet.core_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.GlobalSet.size">
<code class="sig-name descname">size</code><a class="headerlink" href="#pyop2.base.GlobalSet.size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.GlobalSet.total_size">
<code class="sig-name descname">total_size</code><a class="headerlink" href="#pyop2.base.GlobalSet.total_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Total set size, including halo elements.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.GlobalSet.sizes">
<code class="sig-name descname">sizes</code><a class="headerlink" href="#pyop2.base.GlobalSet.sizes" title="Permalink to this definition">¶</a></dt>
<dd><p>Set sizes: core, owned, execute halo, total.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.GlobalSet.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.base.GlobalSet.name" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined label</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.GlobalSet.halo">
<code class="sig-name descname">halo</code><a class="headerlink" href="#pyop2.base.GlobalSet.halo" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.base.Halo" title="pyop2.base.Halo"><code class="xref py py-class docutils literal notranslate"><span class="pre">Halo</span></code></a> associated with this Set</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.GlobalSet.partition_size">
<em class="property">property </em><code class="sig-name descname">partition_size</code><a class="headerlink" href="#pyop2.base.GlobalSet.partition_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Default partition size</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.ExtrudedSet">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">ExtrudedSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">parent</span></em>, <em class="sig-param"><span class="n">layers</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.ExtrudedSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Set</span></code></a></p>
<p>OP2 ExtrudedSet.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parent</strong> (a <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>.) – The parent <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> to build this <a class="reference internal" href="#pyop2.base.ExtrudedSet" title="pyop2.base.ExtrudedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtrudedSet</span></code></a> on top of</p></li>
<li><p><strong>layers</strong> (an integer, indicating the number of layers for every entity,
or an array of shape (parent.total_size, 2) giving the start
and one past the stop layer for every entity.  An entry
<code class="docutils literal notranslate"><span class="pre">a,</span> <span class="pre">b</span> <span class="pre">=</span> <span class="pre">layers[e,</span> <span class="pre">...]</span></code> means that the layers for entity
<code class="docutils literal notranslate"><span class="pre">e</span></code> run over <span class="math">[a, b)</span>.) – The number of layers in this <a class="reference internal" href="#pyop2.base.ExtrudedSet" title="pyop2.base.ExtrudedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtrudedSet</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<p>The number of layers indicates the number of time the base set is
extruded in the direction of the <a class="reference internal" href="#pyop2.base.ExtrudedSet" title="pyop2.base.ExtrudedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtrudedSet</span></code></a>.  As a
result, there are <code class="docutils literal notranslate"><span class="pre">layers-1</span></code> extruded “cells” in an extruded set.</p>
<dl class="py attribute">
<dt id="pyop2.base.ExtrudedSet.parent">
<code class="sig-name descname">parent</code><a class="headerlink" href="#pyop2.base.ExtrudedSet.parent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.ExtrudedSet.layers">
<code class="sig-name descname">layers</code><a class="headerlink" href="#pyop2.base.ExtrudedSet.layers" title="Permalink to this definition">¶</a></dt>
<dd><p>The layers of this extruded set.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.ExtrudedSet.layers_array">
<code class="sig-name descname">layers_array</code><a class="headerlink" href="#pyop2.base.ExtrudedSet.layers_array" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.Subset">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">Subset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">superset</span></em>, <em class="sig-param"><span class="n">indices</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.ExtrudedSet" title="pyop2.base.ExtrudedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.ExtrudedSet</span></code></a></p>
<p>OP2 subset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>superset</strong> (a <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> or a <a class="reference internal" href="#pyop2.base.Subset" title="pyop2.base.Subset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subset</span></code></a>.) – The superset of the subset.</p></li>
<li><p><strong>indices</strong> (<em>a list of integers</em><em>, or </em><em>a numpy array.</em>) – Elements of the superset that form the
subset. Duplicate values are removed when constructing the subset.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="pyop2.base.Subset.superset">
<code class="sig-name descname">superset</code><a class="headerlink" href="#pyop2.base.Subset.superset" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the superset Set</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Subset.indices">
<code class="sig-name descname">indices</code><a class="headerlink" href="#pyop2.base.Subset.indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the indices pointing in the superset.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Subset.layers_array">
<code class="sig-name descname">layers_array</code><a class="headerlink" href="#pyop2.base.Subset.layers_array" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.SetPartition">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">SetPartition</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">set</span></em>, <em class="sig-param"><span class="n">offset</span></em>, <em class="sig-param"><span class="n">size</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.SetPartition" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py class">
<dt id="pyop2.base.MixedSet">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">MixedSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.MixedSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Set</span></code></a>, <a class="reference internal" href="#pyop2.caching.ObjectCached" title="pyop2.caching.ObjectCached"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.caching.ObjectCached</span></code></a></p>
<p>A container for a bag of <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>s.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sets</strong> (<em>iterable</em>) – Iterable of <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>s or <a class="reference internal" href="#pyop2.base.ExtrudedSet" title="pyop2.base.ExtrudedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtrudedSet</span></code></a>s</p>
</dd>
</dl>
<dl class="py attribute">
<dt id="pyop2.base.MixedSet.split">
<code class="sig-name descname">split</code><a class="headerlink" href="#pyop2.base.MixedSet.split" title="Permalink to this definition">¶</a></dt>
<dd><p>The underlying tuple of <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>s.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedSet.core_size">
<code class="sig-name descname">core_size</code><a class="headerlink" href="#pyop2.base.MixedSet.core_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Core set size. Owned elements not touching halo elements.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedSet.size">
<code class="sig-name descname">size</code><a class="headerlink" href="#pyop2.base.MixedSet.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Set size, owned elements.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedSet.total_size">
<code class="sig-name descname">total_size</code><a class="headerlink" href="#pyop2.base.MixedSet.total_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Total set size, including halo elements.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedSet.sizes">
<code class="sig-name descname">sizes</code><a class="headerlink" href="#pyop2.base.MixedSet.sizes" title="Permalink to this definition">¶</a></dt>
<dd><p>Set sizes: core, owned, execute halo, total.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedSet.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.base.MixedSet.name" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined labels.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedSet.halo">
<code class="sig-name descname">halo</code><a class="headerlink" href="#pyop2.base.MixedSet.halo" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.base.Halo" title="pyop2.base.Halo"><code class="xref py py-class docutils literal notranslate"><span class="pre">Halo</span></code></a>s associated with these <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>s.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedSet.layers">
<code class="sig-name descname">layers</code><a class="headerlink" href="#pyop2.base.MixedSet.layers" title="Permalink to this definition">¶</a></dt>
<dd><p>Numbers of layers in the extruded mesh (or None if this MixedSet is not extruded).</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.DataSet">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">DataSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.DataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.caching.ObjectCached" title="pyop2.caching.ObjectCached"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.caching.ObjectCached</span></code></a></p>
<p>PyOP2 Data Set</p>
<p>Set used in the op2.Dat structures to specify the dimension of the data.</p>
<dl class="py attribute">
<dt id="pyop2.base.DataSet.dim">
<code class="sig-name descname">dim</code><a class="headerlink" href="#pyop2.base.DataSet.dim" title="Permalink to this definition">¶</a></dt>
<dd><p>The shape tuple of the values for each element of the set.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.DataSet.cdim">
<code class="sig-name descname">cdim</code><a class="headerlink" href="#pyop2.base.DataSet.cdim" title="Permalink to this definition">¶</a></dt>
<dd><p>The scalar number of values for each member of the set. This is
the product of the dim tuple.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.DataSet.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.base.DataSet.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of the data set.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.DataSet.set">
<code class="sig-name descname">set</code><a class="headerlink" href="#pyop2.base.DataSet.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the parent set of the data set.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.GlobalDataSet">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">GlobalDataSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.GlobalDataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.DataSet</span></code></a></p>
<p>A proxy <a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a> for use in a <a class="reference internal" href="#pyop2.base.Sparsity" title="pyop2.base.Sparsity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sparsity</span></code></a> where the
matrix has <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a> rows or columns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>global</strong> – The <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a> on which this object is based.</p>
</dd>
</dl>
<dl class="py attribute">
<dt id="pyop2.base.GlobalDataSet.dim">
<code class="sig-name descname">dim</code><a class="headerlink" href="#pyop2.base.GlobalDataSet.dim" title="Permalink to this definition">¶</a></dt>
<dd><p>The shape tuple of the values for each element of the set.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.GlobalDataSet.cdim">
<code class="sig-name descname">cdim</code><a class="headerlink" href="#pyop2.base.GlobalDataSet.cdim" title="Permalink to this definition">¶</a></dt>
<dd><p>The scalar number of values for each member of the set. This is
the product of the dim tuple.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.GlobalDataSet.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.base.GlobalDataSet.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of the data set.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.GlobalDataSet.comm">
<code class="sig-name descname">comm</code><a class="headerlink" href="#pyop2.base.GlobalDataSet.comm" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the communicator on which the set is defined.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.GlobalDataSet.set">
<code class="sig-name descname">set</code><a class="headerlink" href="#pyop2.base.GlobalDataSet.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the parent set of the data set.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.GlobalDataSet.size">
<code class="sig-name descname">size</code><a class="headerlink" href="#pyop2.base.GlobalDataSet.size" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of local entries in the Dataset (1 on rank 0)</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.MixedDataSet">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">MixedDataSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.MixedDataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.DataSet</span></code></a>, <a class="reference internal" href="#pyop2.caching.ObjectCached" title="pyop2.caching.ObjectCached"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.caching.ObjectCached</span></code></a></p>
<p>A container for a bag of <a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>s.</p>
<p>Initialized either from a <a class="reference internal" href="#pyop2.base.MixedSet" title="pyop2.base.MixedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedSet</span></code></a> and an iterable or iterator of
<code class="docutils literal notranslate"><span class="pre">dims</span></code> of corresponding length</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mdset</span> <span class="o">=</span> <span class="n">op2</span><span class="o">.</span><span class="n">MixedDataSet</span><span class="p">(</span><span class="n">mset</span><span class="p">,</span> <span class="p">[</span><span class="n">dim1</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">dimN</span><span class="p">])</span>
</pre></div>
</div>
<p>or from a tuple of <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>s and an iterable of <code class="docutils literal notranslate"><span class="pre">dims</span></code> of
corresponding length</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mdset</span> <span class="o">=</span> <span class="n">op2</span><span class="o">.</span><span class="n">MixedDataSet</span><span class="p">([</span><span class="n">set1</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">setN</span><span class="p">],</span> <span class="p">[</span><span class="n">dim1</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">dimN</span><span class="p">])</span>
</pre></div>
</div>
<p>If all <code class="docutils literal notranslate"><span class="pre">dims</span></code> are to be the same, they can also be given as an
<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code> for either of above invocations</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mdset</span> <span class="o">=</span> <span class="n">op2</span><span class="o">.</span><span class="n">MixedDataSet</span><span class="p">(</span><span class="n">mset</span><span class="p">,</span> <span class="n">dim</span><span class="p">)</span>
<span class="n">mdset</span> <span class="o">=</span> <span class="n">op2</span><span class="o">.</span><span class="n">MixedDataSet</span><span class="p">([</span><span class="n">set1</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">setN</span><span class="p">],</span> <span class="n">dim</span><span class="p">)</span>
</pre></div>
</div>
<p>Initialized from a <a class="reference internal" href="#pyop2.base.MixedSet" title="pyop2.base.MixedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedSet</span></code></a> without explicitly specifying <code class="docutils literal notranslate"><span class="pre">dims</span></code>
they default to 1</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mdset</span> <span class="o">=</span> <span class="n">op2</span><span class="o">.</span><span class="n">MixedDataSet</span><span class="p">(</span><span class="n">mset</span><span class="p">)</span>
</pre></div>
</div>
<p>Initialized from an iterable or iterator of <a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>s and/or
<a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>s, where <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>s are implicitly upcast to
<a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>s of dim 1</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mdset</span> <span class="o">=</span> <span class="n">op2</span><span class="o">.</span><span class="n">MixedDataSet</span><span class="p">([</span><span class="n">dset1</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">dsetN</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arg</strong> – a <a class="reference internal" href="#pyop2.base.MixedSet" title="pyop2.base.MixedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedSet</span></code></a> or an iterable or a generator
expression of <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>s or <a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>s or a
mixture of both</p></li>
<li><p><strong>dims</strong> – <cite>None</cite> (the default) or an <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code> or an iterable or
generator expression of <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>s, which <strong>must</strong> be
of same length as <cite>arg</cite></p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When using generator expressions for <code class="docutils literal notranslate"><span class="pre">arg</span></code> or <code class="docutils literal notranslate"><span class="pre">dims</span></code>, these
<strong>must</strong> terminate or else will cause an infinite loop.</p>
</div>
<dl class="py attribute">
<dt id="pyop2.base.MixedDataSet.split">
<code class="sig-name descname">split</code><a class="headerlink" href="#pyop2.base.MixedDataSet.split" title="Permalink to this definition">¶</a></dt>
<dd><p>The underlying tuple of <a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>s.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedDataSet.dim">
<code class="sig-name descname">dim</code><a class="headerlink" href="#pyop2.base.MixedDataSet.dim" title="Permalink to this definition">¶</a></dt>
<dd><p>The shape tuple of the values for each element of the sets.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedDataSet.cdim">
<code class="sig-name descname">cdim</code><a class="headerlink" href="#pyop2.base.MixedDataSet.cdim" title="Permalink to this definition">¶</a></dt>
<dd><p>The sum of the scalar number of values for each member of the sets.
This is the sum of products of the dim tuples.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedDataSet.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.base.MixedDataSet.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of the data sets.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedDataSet.set">
<code class="sig-name descname">set</code><a class="headerlink" href="#pyop2.base.MixedDataSet.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the <a class="reference internal" href="#pyop2.base.MixedSet" title="pyop2.base.MixedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedSet</span></code></a> this <a class="reference internal" href="#pyop2.base.MixedDataSet" title="pyop2.base.MixedDataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDataSet</span></code></a> is
defined on.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.Halo">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">Halo</code><a class="headerlink" href="#pyop2.base.Halo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A description of a halo associated with a <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>.</p>
<p>The halo object describes which <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> elements are sent
where, and which <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> elements are received from where.</p>
<dl class="py method">
<dt id="pyop2.base.Halo.comm">
<em class="property">abstract property </em><code class="sig-name descname">comm</code><a class="headerlink" href="#pyop2.base.Halo.comm" title="Permalink to this definition">¶</a></dt>
<dd><p>The MPI communicator for this halo.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Halo.local_to_global_numbering">
<em class="property">abstract property </em><code class="sig-name descname">local_to_global_numbering</code><a class="headerlink" href="#pyop2.base.Halo.local_to_global_numbering" title="Permalink to this definition">¶</a></dt>
<dd><p>The mapping from process-local to process-global numbers for this halo.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Halo.global_to_local_begin">
<em class="property">abstract </em><code class="sig-name descname">global_to_local_begin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dat</span></em>, <em class="sig-param"><span class="n">insert_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Halo.global_to_local_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin an exchange from global (assembled) to local (ghosted) representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dat</strong> – The <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> to exchange.</p></li>
<li><p><strong>insert_mode</strong> – The insertion mode.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Halo.global_to_local_end">
<em class="property">abstract </em><code class="sig-name descname">global_to_local_end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dat</span></em>, <em class="sig-param"><span class="n">insert_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Halo.global_to_local_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Finish an exchange from global (assembled) to local (ghosted) representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dat</strong> – The <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> to exchange.</p></li>
<li><p><strong>insert_mode</strong> – The insertion mode.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Halo.local_to_global_begin">
<em class="property">abstract </em><code class="sig-name descname">local_to_global_begin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dat</span></em>, <em class="sig-param"><span class="n">insert_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Halo.local_to_global_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin an exchange from local (ghosted) to global (assembled) representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dat</strong> – The <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> to exchange.</p></li>
<li><p><strong>insert_mode</strong> – The insertion mode.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Halo.local_to_global_end">
<em class="property">abstract </em><code class="sig-name descname">local_to_global_end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dat</span></em>, <em class="sig-param"><span class="n">insert_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Halo.local_to_global_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Finish an exchange from local (ghosted) to global (assembled) representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dat</strong> – The <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> to exchange.</p></li>
<li><p><strong>insert_mode</strong> – The insertion mode.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.DataCarrier">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">DataCarrier</code><a class="headerlink" href="#pyop2.base.DataCarrier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Abstract base class for OP2 data.</p>
<p>Actual objects will be <a class="reference internal" href="#pyop2.base.DataCarrier" title="pyop2.base.DataCarrier"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataCarrier</span></code></a> objects of rank 0
(<a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a>), rank 1 (<a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>), or rank 2
(<a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a>)</p>
<dl class="py attribute">
<dt id="pyop2.base.DataCarrier.dtype">
<code class="sig-name descname">dtype</code><a class="headerlink" href="#pyop2.base.DataCarrier.dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>The Python type of the data.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.DataCarrier.ctype">
<code class="sig-name descname">ctype</code><a class="headerlink" href="#pyop2.base.DataCarrier.ctype" title="Permalink to this definition">¶</a></dt>
<dd><p>The c type of the data.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.DataCarrier.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.base.DataCarrier.name" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined label.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.DataCarrier.dim">
<code class="sig-name descname">dim</code><a class="headerlink" href="#pyop2.base.DataCarrier.dim" title="Permalink to this definition">¶</a></dt>
<dd><p>The shape tuple of the values for each element of the object.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.DataCarrier.cdim">
<code class="sig-name descname">cdim</code><a class="headerlink" href="#pyop2.base.DataCarrier.cdim" title="Permalink to this definition">¶</a></dt>
<dd><p>The scalar number of values for each member of the object. This is
the product of the dim tuple.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.Dat">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">Dat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dtype</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Dat" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.DataCarrier" title="pyop2.base.DataCarrier"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.DataCarrier</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base._EmptyDataMixin</span></code></p>
<p>OP2 vector data. A <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> holds values on every element of a
<a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>.</p>
<p>If a <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> is passed as the <code class="docutils literal notranslate"><span class="pre">dataset</span></code> argument, rather
than a <a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>, the <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> is created with a default
<a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a> dimension of 1.</p>
<p>If a <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> is passed as the <code class="docutils literal notranslate"><span class="pre">dataset</span></code> argument, a copy is
returned.</p>
<p>It is permissible to pass <cite>None</cite> as the <cite>data</cite> argument.  In this
case, allocation of the data buffer is postponed until it is
accessed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the data buffer is not passed in, it is implicitly
initialised to be zero.</p>
</div>
<p>When a <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> is passed to <a class="reference internal" href="#pyop2.op2.par_loop" title="pyop2.op2.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyop2.op2.par_loop()</span></code></a>, the map via
which indirection occurs and the access descriptor are passed by
calling the <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>. For instance, if a <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> named <code class="docutils literal notranslate"><span class="pre">D</span></code> is
to be accessed for reading via a <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> named <code class="docutils literal notranslate"><span class="pre">M</span></code>, this is
accomplished by</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="p">(</span><span class="n">pyop2</span><span class="o">.</span><span class="n">READ</span><span class="p">,</span> <span class="n">M</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> through which indirection occurs can be indexed
using the index notation described in the documentation for the
<a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>. Direct access to a Dat is accomplished by
omitting the path argument.</p>
<p><a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> objects support the pointwise linear algebra operations
<code class="docutils literal notranslate"><span class="pre">+=</span></code>, <code class="docutils literal notranslate"><span class="pre">*=</span></code>, <code class="docutils literal notranslate"><span class="pre">-=</span></code>, <code class="docutils literal notranslate"><span class="pre">/=</span></code>, where <code class="docutils literal notranslate"><span class="pre">*=</span></code> and <code class="docutils literal notranslate"><span class="pre">/=</span></code> also support
multiplication / division by a scalar.</p>
<dl class="py attribute">
<dt id="pyop2.base.Dat.pack">
<code class="sig-name descname">pack</code><a class="headerlink" href="#pyop2.base.Dat.pack" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Dat.split">
<code class="sig-name descname">split</code><a class="headerlink" href="#pyop2.base.Dat.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Tuple containing only this <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Dat.dataset">
<code class="sig-name descname">dataset</code><a class="headerlink" href="#pyop2.base.Dat.dataset" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a> on which the Dat is defined.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Dat.dim">
<code class="sig-name descname">dim</code><a class="headerlink" href="#pyop2.base.Dat.dim" title="Permalink to this definition">¶</a></dt>
<dd><p>The shape of the values for each element of the object.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Dat.cdim">
<code class="sig-name descname">cdim</code><a class="headerlink" href="#pyop2.base.Dat.cdim" title="Permalink to this definition">¶</a></dt>
<dd><p>The scalar number of values for each member of the object. This is
the product of the dim tuple.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Dat.data">
<em class="property">property </em><code class="sig-name descname">data</code><a class="headerlink" href="#pyop2.base.Dat.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Numpy array containing the data values.</p>
<p>With this accessor you are claiming that you will modify
the values you get back.  If you only need to look at the
values, use <a class="reference internal" href="#pyop2.base.Dat.data_ro" title="pyop2.base.Dat.data_ro"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_ro()</span></code></a> instead.</p>
<p>This only shows local values, to see the halo values too use
<a class="reference internal" href="#pyop2.base.Dat.data_with_halos" title="pyop2.base.Dat.data_with_halos"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_with_halos()</span></code></a>.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Dat.data_with_halos">
<em class="property">property </em><code class="sig-name descname">data_with_halos</code><a class="headerlink" href="#pyop2.base.Dat.data_with_halos" title="Permalink to this definition">¶</a></dt>
<dd><p>A view of this <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>s data.</p>
<p>This accessor marks the <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> as dirty, see
<a class="reference internal" href="#pyop2.base.Dat.data" title="pyop2.base.Dat.data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data()</span></code></a> for more details on the semantics.</p>
<p>With this accessor, you get to see up to date halo values, but
you should not try and modify them, because they will be
overwritten by the next halo exchange.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Dat.data_ro">
<em class="property">property </em><code class="sig-name descname">data_ro</code><a class="headerlink" href="#pyop2.base.Dat.data_ro" title="Permalink to this definition">¶</a></dt>
<dd><p>Numpy array containing the data values.  Read-only.</p>
<p>With this accessor you are not allowed to modify the values
you get back.  If you need to do so, use <a class="reference internal" href="#pyop2.base.Dat.data" title="pyop2.base.Dat.data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data()</span></code></a> instead.</p>
<p>This only shows local values, to see the halo values too use
<a class="reference internal" href="#pyop2.base.Dat.data_ro_with_halos" title="pyop2.base.Dat.data_ro_with_halos"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_ro_with_halos()</span></code></a>.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Dat.data_ro_with_halos">
<em class="property">property </em><code class="sig-name descname">data_ro_with_halos</code><a class="headerlink" href="#pyop2.base.Dat.data_ro_with_halos" title="Permalink to this definition">¶</a></dt>
<dd><p>A view of this <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>s data.</p>
<p>This accessor does not mark the <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> as dirty, and is
a read only view, see <a class="reference internal" href="#pyop2.base.Dat.data_ro" title="pyop2.base.Dat.data_ro"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_ro()</span></code></a> for more details on the
semantics.</p>
<p>With this accessor, you get to see up to date halo values, but
you should not try and modify them, because they will be
overwritten by the next halo exchange.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Dat.save">
<code class="sig-name descname">save</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Dat.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the data array to file <code class="docutils literal notranslate"><span class="pre">filename</span></code> in NumPy format.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Dat.load">
<code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Dat.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the data stored in file <code class="docutils literal notranslate"><span class="pre">filename</span></code> into a NumPy array
and store the values in <code class="xref py py-meth docutils literal notranslate"><span class="pre">_data()</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Dat.shape">
<code class="sig-name descname">shape</code><a class="headerlink" href="#pyop2.base.Dat.shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Dat.dtype">
<code class="sig-name descname">dtype</code><a class="headerlink" href="#pyop2.base.Dat.dtype" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Dat.nbytes">
<code class="sig-name descname">nbytes</code><a class="headerlink" href="#pyop2.base.Dat.nbytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an estimate of the size of the data associated with this
<a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> in bytes. This will be the correct size of the data
payload, but does not take into account the (presumably small)
overhead of the object and its metadata.</p>
<p>Note that this is the process local memory usage, not the sum
over all MPI processes.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Dat.zero">
<code class="sig-name descname">zero</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subset</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Dat.zero" title="Permalink to this definition">¶</a></dt>
<dd><p>Zero the data associated with this <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>subset</strong> – A <a class="reference internal" href="#pyop2.base.Subset" title="pyop2.base.Subset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subset</span></code></a> of entries to zero (optional).</p>
</dd>
</dl>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Dat.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em>, <em class="sig-param"><span class="n">subset</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Dat.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the data in this <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> into another.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> – The destination <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a></p></li>
<li><p><strong>subset</strong> – A <a class="reference internal" href="#pyop2.base.Subset" title="pyop2.base.Subset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subset</span></code></a> of elements to copy (optional)</p></li>
</ul>
</dd>
</dl>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Dat.inner">
<code class="sig-name descname">inner</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Dat.inner" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the l2 inner product of the flattened <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> – the other <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> to compute the inner
product against. The complex conjugate of this is taken.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Dat.norm">
<em class="property">property </em><code class="sig-name descname">norm</code><a class="headerlink" href="#pyop2.base.Dat.norm" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the l2 norm of this <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This acts on the flattened data (see also <a class="reference internal" href="#pyop2.base.Dat.inner" title="pyop2.base.Dat.inner"><code class="xref py py-meth docutils literal notranslate"><span class="pre">inner()</span></code></a>).</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Dat.global_to_local_begin">
<code class="sig-name descname">global_to_local_begin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">access_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Dat.global_to_local_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin a halo exchange from global to ghosted representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>access_mode</strong> – Mode with which the data will subsequently
be accessed.</p>
</dd>
</dl>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Dat.global_to_local_end">
<code class="sig-name descname">global_to_local_end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">access_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Dat.global_to_local_end" title="Permalink to this definition">¶</a></dt>
<dd><p>End a halo exchange from global to ghosted representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>access_mode</strong> – Mode with which the data will subsequently
be accessed.</p>
</dd>
</dl>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Dat.local_to_global_begin">
<code class="sig-name descname">local_to_global_begin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">insert_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Dat.local_to_global_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin a halo exchange from ghosted to global representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>insert_mode</strong> – insertion mode (an access descriptor)</p>
</dd>
</dl>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Dat.local_to_global_end">
<code class="sig-name descname">local_to_global_end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">insert_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Dat.local_to_global_end" title="Permalink to this definition">¶</a></dt>
<dd><p>End a halo exchange from ghosted to global representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>insert_mode</strong> – insertion mode (an access descriptor)</p>
</dd>
</dl>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.DatView">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">DatView</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dat</span></em>, <em class="sig-param"><span class="n">index</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.DatView" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Dat</span></code></a></p>
<p>An indexed view into a <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>.</p>
<p>This object can be used like a <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> but the kernel will
only see the requested index, rather than the full data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dat</strong> – The <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> to create a view into.</p></li>
<li><p><strong>index</strong> – The component to select a view of.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="pyop2.base.DatView.cdim">
<code class="sig-name descname">cdim</code><a class="headerlink" href="#pyop2.base.DatView.cdim" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.DatView.dim">
<code class="sig-name descname">dim</code><a class="headerlink" href="#pyop2.base.DatView.dim" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.DatView.shape">
<code class="sig-name descname">shape</code><a class="headerlink" href="#pyop2.base.DatView.shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyop2.base.DatView.data">
<em class="property">property </em><code class="sig-name descname">data</code><a class="headerlink" href="#pyop2.base.DatView.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Numpy array containing the data values.</p>
<p>With this accessor you are claiming that you will modify
the values you get back.  If you only need to look at the
values, use <a class="reference internal" href="#pyop2.base.DatView.data_ro" title="pyop2.base.DatView.data_ro"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_ro()</span></code></a> instead.</p>
<p>This only shows local values, to see the halo values too use
<a class="reference internal" href="#pyop2.base.DatView.data_with_halos" title="pyop2.base.DatView.data_with_halos"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_with_halos()</span></code></a>.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.DatView.data_ro">
<em class="property">property </em><code class="sig-name descname">data_ro</code><a class="headerlink" href="#pyop2.base.DatView.data_ro" title="Permalink to this definition">¶</a></dt>
<dd><p>Numpy array containing the data values.  Read-only.</p>
<p>With this accessor you are not allowed to modify the values
you get back.  If you need to do so, use <a class="reference internal" href="#pyop2.base.DatView.data" title="pyop2.base.DatView.data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data()</span></code></a> instead.</p>
<p>This only shows local values, to see the halo values too use
<a class="reference internal" href="#pyop2.base.DatView.data_ro_with_halos" title="pyop2.base.DatView.data_ro_with_halos"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_ro_with_halos()</span></code></a>.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.DatView.data_with_halos">
<em class="property">property </em><code class="sig-name descname">data_with_halos</code><a class="headerlink" href="#pyop2.base.DatView.data_with_halos" title="Permalink to this definition">¶</a></dt>
<dd><p>A view of this <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>s data.</p>
<p>This accessor marks the <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> as dirty, see
<a class="reference internal" href="#pyop2.base.DatView.data" title="pyop2.base.DatView.data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data()</span></code></a> for more details on the semantics.</p>
<p>With this accessor, you get to see up to date halo values, but
you should not try and modify them, because they will be
overwritten by the next halo exchange.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.DatView.data_ro_with_halos">
<em class="property">property </em><code class="sig-name descname">data_ro_with_halos</code><a class="headerlink" href="#pyop2.base.DatView.data_ro_with_halos" title="Permalink to this definition">¶</a></dt>
<dd><p>A view of this <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>s data.</p>
<p>This accessor does not mark the <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> as dirty, and is
a read only view, see <a class="reference internal" href="#pyop2.base.DatView.data_ro" title="pyop2.base.DatView.data_ro"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_ro()</span></code></a> for more details on the
semantics.</p>
<p>With this accessor, you get to see up to date halo values, but
you should not try and modify them, because they will be
overwritten by the next halo exchange.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.MixedDat">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">MixedDat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mdset_or_dats</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.MixedDat" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Dat</span></code></a></p>
<p>A container for a bag of <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>s.</p>
<p>Initialized either from a <a class="reference internal" href="#pyop2.base.MixedDataSet" title="pyop2.base.MixedDataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDataSet</span></code></a>, a <a class="reference internal" href="#pyop2.base.MixedSet" title="pyop2.base.MixedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedSet</span></code></a>, or
an iterable of <a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>s and/or <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>s, where all the
<a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>s are implcitly upcast to <a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>s</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mdat</span> <span class="o">=</span> <span class="n">op2</span><span class="o">.</span><span class="n">MixedDat</span><span class="p">(</span><span class="n">mdset</span><span class="p">)</span>
<span class="n">mdat</span> <span class="o">=</span> <span class="n">op2</span><span class="o">.</span><span class="n">MixedDat</span><span class="p">([</span><span class="n">dset1</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">dsetN</span><span class="p">])</span>
</pre></div>
</div>
<p>or from an iterable of <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>s</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mdat</span> <span class="o">=</span> <span class="n">op2</span><span class="o">.</span><span class="n">MixedDat</span><span class="p">([</span><span class="n">dat1</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">datN</span><span class="p">])</span>
</pre></div>
</div>
<dl class="py attribute">
<dt id="pyop2.base.MixedDat.dtype">
<code class="sig-name descname">dtype</code><a class="headerlink" href="#pyop2.base.MixedDat.dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>The NumPy dtype of the data.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedDat.split">
<code class="sig-name descname">split</code><a class="headerlink" href="#pyop2.base.MixedDat.split" title="Permalink to this definition">¶</a></dt>
<dd><p>The underlying tuple of <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>s.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedDat.dataset">
<code class="sig-name descname">dataset</code><a class="headerlink" href="#pyop2.base.MixedDat.dataset" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.base.MixedDataSet" title="pyop2.base.MixedDataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDataSet</span></code></a>s this <a class="reference internal" href="#pyop2.base.MixedDat" title="pyop2.base.MixedDat"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDat</span></code></a> is defined on.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.MixedDat.data">
<em class="property">property </em><code class="sig-name descname">data</code><a class="headerlink" href="#pyop2.base.MixedDat.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Numpy arrays containing the data excluding halos.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.MixedDat.data_with_halos">
<em class="property">property </em><code class="sig-name descname">data_with_halos</code><a class="headerlink" href="#pyop2.base.MixedDat.data_with_halos" title="Permalink to this definition">¶</a></dt>
<dd><p>Numpy arrays containing the data including halos.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.MixedDat.data_ro">
<em class="property">property </em><code class="sig-name descname">data_ro</code><a class="headerlink" href="#pyop2.base.MixedDat.data_ro" title="Permalink to this definition">¶</a></dt>
<dd><p>Numpy arrays with read-only data excluding halos.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.MixedDat.data_ro_with_halos">
<em class="property">property </em><code class="sig-name descname">data_ro_with_halos</code><a class="headerlink" href="#pyop2.base.MixedDat.data_ro_with_halos" title="Permalink to this definition">¶</a></dt>
<dd><p>Numpy arrays with read-only data including halos.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.MixedDat.halo_valid">
<em class="property">property </em><code class="sig-name descname">halo_valid</code><a class="headerlink" href="#pyop2.base.MixedDat.halo_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Does this Dat have up to date halos?</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.MixedDat.global_to_local_begin">
<code class="sig-name descname">global_to_local_begin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">access_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.MixedDat.global_to_local_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.MixedDat.global_to_local_end">
<code class="sig-name descname">global_to_local_end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">access_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.MixedDat.global_to_local_end" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.MixedDat.local_to_global_begin">
<code class="sig-name descname">local_to_global_begin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">insert_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.MixedDat.local_to_global_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.MixedDat.local_to_global_end">
<code class="sig-name descname">local_to_global_end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">insert_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.MixedDat.local_to_global_end" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.MixedDat.zero">
<code class="sig-name descname">zero</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subset</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.MixedDat.zero" title="Permalink to this definition">¶</a></dt>
<dd><p>Zero the data associated with this <a class="reference internal" href="#pyop2.base.MixedDat" title="pyop2.base.MixedDat"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDat</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>subset</strong> – optional subset of entries to zero (not implemented).</p>
</dd>
</dl>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedDat.nbytes">
<code class="sig-name descname">nbytes</code><a class="headerlink" href="#pyop2.base.MixedDat.nbytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an estimate of the size of the data associated with this
<a class="reference internal" href="#pyop2.base.MixedDat" title="pyop2.base.MixedDat"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDat</span></code></a> in bytes. This will be the correct size of the data
payload, but does not take into account the (presumably small)
overhead of the object and its metadata.</p>
<p>Note that this is the process local memory usage, not the sum
over all MPI processes.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.MixedDat.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em>, <em class="sig-param"><span class="n">subset</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.MixedDat.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the data in this <a class="reference internal" href="#pyop2.base.MixedDat" title="pyop2.base.MixedDat"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDat</span></code></a> into another.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> – The destination <a class="reference internal" href="#pyop2.base.MixedDat" title="pyop2.base.MixedDat"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDat</span></code></a></p></li>
<li><p><strong>subset</strong> – Subsets are not supported, this must be <code class="xref py py-class docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ul>
</dd>
</dl>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.MixedDat.inner">
<code class="sig-name descname">inner</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.MixedDat.inner" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the l2 inner product.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> – the other <a class="reference internal" href="#pyop2.base.MixedDat" title="pyop2.base.MixedDat"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDat</span></code></a> to compute the inner product against</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.Global">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">Global</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dim</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dtype</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Global" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.DataCarrier" title="pyop2.base.DataCarrier"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.DataCarrier</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base._EmptyDataMixin</span></code></p>
<p>OP2 global value.</p>
<p>When a <code class="docutils literal notranslate"><span class="pre">Global</span></code> is passed to a <a class="reference internal" href="#pyop2.op2.par_loop" title="pyop2.op2.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyop2.op2.par_loop()</span></code></a>, the access
descriptor is passed by <cite>calling</cite> the <code class="docutils literal notranslate"><span class="pre">Global</span></code>.  For example, if
a <code class="docutils literal notranslate"><span class="pre">Global</span></code> named <code class="docutils literal notranslate"><span class="pre">G</span></code> is to be accessed for reading, this is
accomplished by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">G</span><span class="p">(</span><span class="n">pyop2</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>
</pre></div>
</div>
<p>It is permissible to pass <cite>None</cite> as the <cite>data</cite> argument.  In this
case, allocation of the data buffer is postponed until it is
accessed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the data buffer is not passed in, it is implicitly
initialised to be zero.</p>
</div>
<dl class="py attribute">
<dt id="pyop2.base.Global.dataset">
<code class="sig-name descname">dataset</code><a class="headerlink" href="#pyop2.base.Global.dataset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyop2.base.Global.shape">
<em class="property">property </em><code class="sig-name descname">shape</code><a class="headerlink" href="#pyop2.base.Global.shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyop2.base.Global.dtype">
<em class="property">property </em><code class="sig-name descname">dtype</code><a class="headerlink" href="#pyop2.base.Global.dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>The Python type of the data.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Global.data_ro">
<em class="property">property </em><code class="sig-name descname">data_ro</code><a class="headerlink" href="#pyop2.base.Global.data_ro" title="Permalink to this definition">¶</a></dt>
<dd><p>Data array.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Global.data">
<em class="property">property </em><code class="sig-name descname">data</code><a class="headerlink" href="#pyop2.base.Global.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Data array.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Global.nbytes">
<em class="property">property </em><code class="sig-name descname">nbytes</code><a class="headerlink" href="#pyop2.base.Global.nbytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an estimate of the size of the data associated with this
<a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a> in bytes. This will be the correct size of the
data payload, but does not take into account the overhead of
the object and its metadata. This renders this method of
little statistical significance, however it is included to
make the interface consistent.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Global.duplicate">
<code class="sig-name descname">duplicate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Global.duplicate" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a deep copy of self.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Global.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em>, <em class="sig-param"><span class="n">subset</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Global.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the data in this <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a> into another.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> – The destination <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a></p></li>
<li><p><strong>subset</strong> – A <a class="reference internal" href="#pyop2.base.Subset" title="pyop2.base.Subset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subset</span></code></a> of elements to copy (optional)</p></li>
</ul>
</dd>
</dl>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Global.zero">
<code class="sig-name descname">zero</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Global.zero" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Global.global_to_local_begin">
<code class="sig-name descname">global_to_local_begin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">access_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Global.global_to_local_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Dummy halo operation for the case in which a <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a> forms
part of a <a class="reference internal" href="#pyop2.base.MixedDat" title="pyop2.base.MixedDat"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDat</span></code></a>.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Global.global_to_local_end">
<code class="sig-name descname">global_to_local_end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">access_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Global.global_to_local_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Dummy halo operation for the case in which a <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a> forms
part of a <a class="reference internal" href="#pyop2.base.MixedDat" title="pyop2.base.MixedDat"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDat</span></code></a>.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Global.local_to_global_begin">
<code class="sig-name descname">local_to_global_begin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">insert_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Global.local_to_global_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Dummy halo operation for the case in which a <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a> forms
part of a <a class="reference internal" href="#pyop2.base.MixedDat" title="pyop2.base.MixedDat"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDat</span></code></a>.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Global.local_to_global_end">
<code class="sig-name descname">local_to_global_end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">insert_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Global.local_to_global_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Dummy halo operation for the case in which a <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a> forms
part of a <a class="reference internal" href="#pyop2.base.MixedDat" title="pyop2.base.MixedDat"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDat</span></code></a>.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Global.inner">
<code class="sig-name descname">inner</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Global.inner" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.Map">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">Map</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterset</span></em>, <em class="sig-param"><span class="n">toset</span></em>, <em class="sig-param"><span class="n">arity</span></em>, <em class="sig-param"><span class="n">values</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Map" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>OP2 map, a relation between two <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> objects.</p>
<p>Each entry in the <code class="docutils literal notranslate"><span class="pre">iterset</span></code> maps to <code class="docutils literal notranslate"><span class="pre">arity</span></code> entries in the
<code class="docutils literal notranslate"><span class="pre">toset</span></code>. When a map is used in a <a class="reference internal" href="#pyop2.op2.par_loop" title="pyop2.op2.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyop2.op2.par_loop()</span></code></a>, it is
possible to use Python index notation to select an individual entry on the
right hand side of this map. There are three possibilities:</p>
<ul class="simple">
<li><p>No index. All <code class="docutils literal notranslate"><span class="pre">arity</span></code> <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> entries will be passed to the
kernel.</p></li>
<li><p>An integer: <code class="docutils literal notranslate"><span class="pre">some_map[n]</span></code>. The <code class="docutils literal notranslate"><span class="pre">n</span></code> th entry of the
map result will be passed to the kernel.</p></li>
</ul>
<dl class="py attribute">
<dt id="pyop2.base.Map.dtype">
<code class="sig-name descname">dtype</code><em class="property"> = dtype('int32')</em><a class="headerlink" href="#pyop2.base.Map.dtype" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Map.split">
<code class="sig-name descname">split</code><a class="headerlink" href="#pyop2.base.Map.split" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Map.iterset">
<code class="sig-name descname">iterset</code><a class="headerlink" href="#pyop2.base.Map.iterset" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> mapped from.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Map.toset">
<code class="sig-name descname">toset</code><a class="headerlink" href="#pyop2.base.Map.toset" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> mapped to.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Map.arity">
<code class="sig-name descname">arity</code><a class="headerlink" href="#pyop2.base.Map.arity" title="Permalink to this definition">¶</a></dt>
<dd><p>Arity of the mapping: number of toset elements mapped to per
iterset element.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Map.arities">
<code class="sig-name descname">arities</code><a class="headerlink" href="#pyop2.base.Map.arities" title="Permalink to this definition">¶</a></dt>
<dd><p>Arity of the mapping: number of toset elements mapped to per
iterset element.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Map.arange">
<code class="sig-name descname">arange</code><a class="headerlink" href="#pyop2.base.Map.arange" title="Permalink to this definition">¶</a></dt>
<dd><p>Tuple of arity offsets for each constituent <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Map.values">
<code class="sig-name descname">values</code><a class="headerlink" href="#pyop2.base.Map.values" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping array.</p>
<p>This only returns the map values for local points, to see the
halo points too, use <a class="reference internal" href="#pyop2.base.Map.values_with_halo" title="pyop2.base.Map.values_with_halo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">values_with_halo()</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Map.values_with_halo">
<code class="sig-name descname">values_with_halo</code><a class="headerlink" href="#pyop2.base.Map.values_with_halo" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping array.</p>
<p>This returns all map values (including halo points), see
<a class="reference internal" href="#pyop2.base.Map.values" title="pyop2.base.Map.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">values()</span></code></a> if you only need to look at the local
points.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Map.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.base.Map.name" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined label</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Map.offset">
<code class="sig-name descname">offset</code><a class="headerlink" href="#pyop2.base.Map.offset" title="Permalink to this definition">¶</a></dt>
<dd><p>The vertical offset.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.MixedMap">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">MixedMap</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.MixedMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Map</span></code></a>, <a class="reference internal" href="#pyop2.caching.ObjectCached" title="pyop2.caching.ObjectCached"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.caching.ObjectCached</span></code></a></p>
<p>A container for a bag of <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>s.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>maps</strong> (<em>iterable</em>) – Iterable of <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>s</p>
</dd>
</dl>
<dl class="py attribute">
<dt id="pyop2.base.MixedMap.split">
<code class="sig-name descname">split</code><a class="headerlink" href="#pyop2.base.MixedMap.split" title="Permalink to this definition">¶</a></dt>
<dd><p>The underlying tuple of <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>s.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedMap.iterset">
<code class="sig-name descname">iterset</code><a class="headerlink" href="#pyop2.base.MixedMap.iterset" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.base.MixedSet" title="pyop2.base.MixedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedSet</span></code></a> mapped from.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedMap.toset">
<code class="sig-name descname">toset</code><a class="headerlink" href="#pyop2.base.MixedMap.toset" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.base.MixedSet" title="pyop2.base.MixedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedSet</span></code></a> mapped to.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedMap.arity">
<code class="sig-name descname">arity</code><a class="headerlink" href="#pyop2.base.MixedMap.arity" title="Permalink to this definition">¶</a></dt>
<dd><p>Arity of the mapping: total number of toset elements mapped to per
iterset element.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedMap.arities">
<code class="sig-name descname">arities</code><a class="headerlink" href="#pyop2.base.MixedMap.arities" title="Permalink to this definition">¶</a></dt>
<dd><p>Arity of the mapping: number of toset elements mapped to per
iterset element.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedMap.arange">
<code class="sig-name descname">arange</code><a class="headerlink" href="#pyop2.base.MixedMap.arange" title="Permalink to this definition">¶</a></dt>
<dd><p>Tuple of arity offsets for each constituent <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedMap.values">
<code class="sig-name descname">values</code><a class="headerlink" href="#pyop2.base.MixedMap.values" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping arrays excluding data for halos.</p>
<p>This only returns the map values for local points, to see the
halo points too, use <a class="reference internal" href="#pyop2.base.MixedMap.values_with_halo" title="pyop2.base.MixedMap.values_with_halo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">values_with_halo()</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedMap.values_with_halo">
<code class="sig-name descname">values_with_halo</code><a class="headerlink" href="#pyop2.base.MixedMap.values_with_halo" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping arrays including data for halos.</p>
<p>This returns all map values (including halo points), see
<a class="reference internal" href="#pyop2.base.MixedMap.values" title="pyop2.base.MixedMap.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">values()</span></code></a> if you only need to look at the local
points.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedMap.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.base.MixedMap.name" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined labels</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.MixedMap.offset">
<code class="sig-name descname">offset</code><a class="headerlink" href="#pyop2.base.MixedMap.offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Vertical offsets.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.Sparsity">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">Sparsity</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Sparsity" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.caching.ObjectCached" title="pyop2.caching.ObjectCached"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.caching.ObjectCached</span></code></a></p>
<p>OP2 Sparsity, the non-zero structure a matrix derived from the union of
the outer product of pairs of <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> objects.</p>
<p>Examples of constructing a Sparsity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Sparsity</span><span class="p">(</span><span class="n">single_dset</span><span class="p">,</span> <span class="n">single_map</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">)</span>
<span class="n">Sparsity</span><span class="p">((</span><span class="n">row_dset</span><span class="p">,</span> <span class="n">col_dset</span><span class="p">),</span> <span class="p">(</span><span class="n">single_rowmap</span><span class="p">,</span> <span class="n">single_colmap</span><span class="p">))</span>
<span class="n">Sparsity</span><span class="p">((</span><span class="n">row_dset</span><span class="p">,</span> <span class="n">col_dset</span><span class="p">),</span>
         <span class="p">[(</span><span class="n">first_rowmap</span><span class="p">,</span> <span class="n">first_colmap</span><span class="p">),</span> <span class="p">(</span><span class="n">second_rowmap</span><span class="p">,</span> <span class="n">second_colmap</span><span class="p">)])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dsets</strong> – <a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>s for the left and right function
spaces this <a class="reference internal" href="#pyop2.base.Sparsity" title="pyop2.base.Sparsity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sparsity</span></code></a> maps between</p></li>
<li><p><strong>maps</strong> (a pair of <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>s specifying a row map and a column
map, or an iterable of pairs of <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>s specifying multiple
row and column maps - if a single <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> is passed, it is
used as both a row map and a column map) – <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>s to build the <a class="reference internal" href="#pyop2.base.Sparsity" title="pyop2.base.Sparsity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sparsity</span></code></a> from</p></li>
<li><p><strong>iteration_regions</strong> – regions that select subsets of extruded maps to iterate over.</p></li>
<li><p><strong>name</strong> (<em>string</em>) – user-defined label (optional)</p></li>
<li><p><strong>nest</strong> – Should the sparsity over mixed set be built as nested blocks?</p></li>
<li><p><strong>block_sparse</strong> – Should the sparsity for datasets with
cdim &gt; 1 be built as a block sparsity?</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="pyop2.base.Sparsity.dsets">
<code class="sig-name descname">dsets</code><a class="headerlink" href="#pyop2.base.Sparsity.dsets" title="Permalink to this definition">¶</a></dt>
<dd><p>A pair of <a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>s for the left and right function
spaces this <a class="reference internal" href="#pyop2.base.Sparsity" title="pyop2.base.Sparsity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sparsity</span></code></a> maps between.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Sparsity.maps">
<code class="sig-name descname">maps</code><a class="headerlink" href="#pyop2.base.Sparsity.maps" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of pairs (rmap, cmap) where each pair of
<a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> objects will later be used to assemble into this
matrix. The iterset of each of the maps in a pair must be the
same, while the toset of all the maps which appear first
must be common, this will form the row <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> of the
sparsity. Similarly, the toset of all the maps which appear
second must be common and will form the column <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> of
the <code class="docutils literal notranslate"><span class="pre">Sparsity</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Sparsity.cmaps">
<code class="sig-name descname">cmaps</code><a class="headerlink" href="#pyop2.base.Sparsity.cmaps" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of column maps this sparsity is assembled from.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Sparsity.rmaps">
<code class="sig-name descname">rmaps</code><a class="headerlink" href="#pyop2.base.Sparsity.rmaps" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of row maps this sparsity is assembled from.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Sparsity.dims">
<code class="sig-name descname">dims</code><a class="headerlink" href="#pyop2.base.Sparsity.dims" title="Permalink to this definition">¶</a></dt>
<dd><p>A tuple of tuples where the <code class="docutils literal notranslate"><span class="pre">i,j``th</span> <span class="pre">entry</span>
<span class="pre">is</span> <span class="pre">a</span> <span class="pre">pair</span> <span class="pre">giving</span> <span class="pre">the</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">rows</span> <span class="pre">per</span> <span class="pre">entry</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">row</span>
<span class="pre">:class:`Set`</span> <span class="pre">and</span> <span class="pre">the</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">columns</span> <span class="pre">per</span> <span class="pre">entry</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">column</span>
<span class="pre">:class:`Set`</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">``Sparsity</span></code>.  The extents of the first
two indices are given by the <a class="reference internal" href="#pyop2.base.Sparsity.shape" title="pyop2.base.Sparsity.shape"><code class="xref py py-attr docutils literal notranslate"><span class="pre">shape</span></code></a> of the sparsity.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Sparsity.shape">
<code class="sig-name descname">shape</code><a class="headerlink" href="#pyop2.base.Sparsity.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of block rows and columns.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Sparsity.nrows">
<code class="sig-name descname">nrows</code><a class="headerlink" href="#pyop2.base.Sparsity.nrows" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of rows in the <code class="docutils literal notranslate"><span class="pre">Sparsity</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Sparsity.ncols">
<code class="sig-name descname">ncols</code><a class="headerlink" href="#pyop2.base.Sparsity.ncols" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of columns in the <code class="docutils literal notranslate"><span class="pre">Sparsity</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Sparsity.nested">
<code class="sig-name descname">nested</code><a class="headerlink" href="#pyop2.base.Sparsity.nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether a sparsity is monolithic (even if it has a block structure).</p>
<p>To elaborate, if a sparsity maps between
<a class="reference internal" href="#pyop2.base.MixedDataSet" title="pyop2.base.MixedDataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDataSet</span></code></a>s, it can either be nested, in which
case it consists of as many blocks are the product of the
length of the datasets it maps between, or monolithic.  In the
latter case the sparsity is for the full map between the mixed
datasets, rather than between the blocks of the non-mixed
datasets underneath them.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Sparsity.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.base.Sparsity.name" title="Permalink to this definition">¶</a></dt>
<dd><p>A user-defined label.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Sparsity.nnz">
<code class="sig-name descname">nnz</code><a class="headerlink" href="#pyop2.base.Sparsity.nnz" title="Permalink to this definition">¶</a></dt>
<dd><p>Array containing the number of non-zeroes in the various rows of the
diagonal portion of the local submatrix.</p>
<p>This is the same as the parameter <cite>d_nnz</cite> used for preallocation in
PETSc’s <a class="reference external" href="http://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/Mat/MatMPIAIJSetPreallocation.html">MatMPIAIJSetPreallocation</a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Sparsity.onnz">
<code class="sig-name descname">onnz</code><a class="headerlink" href="#pyop2.base.Sparsity.onnz" title="Permalink to this definition">¶</a></dt>
<dd><p>Array containing the number of non-zeroes in the various rows of the
off-diagonal portion of the local submatrix.</p>
<p>This is the same as the parameter <cite>o_nnz</cite> used for preallocation in
PETSc’s <a class="reference external" href="http://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/Mat/MatMPIAIJSetPreallocation.html">MatMPIAIJSetPreallocation</a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Sparsity.nz">
<code class="sig-name descname">nz</code><a class="headerlink" href="#pyop2.base.Sparsity.nz" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Sparsity.onz">
<code class="sig-name descname">onz</code><a class="headerlink" href="#pyop2.base.Sparsity.onz" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.Mat">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">Mat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sparsity</span></em>, <em class="sig-param"><span class="n">dtype</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Mat" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.DataCarrier" title="pyop2.base.DataCarrier"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.DataCarrier</span></code></a></p>
<p>OP2 matrix data. A <code class="docutils literal notranslate"><span class="pre">Mat</span></code> is defined on a sparsity pattern and holds a value
for each element in the <a class="reference internal" href="#pyop2.base.Sparsity" title="pyop2.base.Sparsity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sparsity</span></code></a>.</p>
<p>When a <code class="docutils literal notranslate"><span class="pre">Mat</span></code> is passed to <a class="reference internal" href="#pyop2.op2.par_loop" title="pyop2.op2.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyop2.op2.par_loop()</span></code></a>, the maps via which
indirection occurs for the row and column space, and the access
descriptor are passed by <cite>calling</cite> the <code class="docutils literal notranslate"><span class="pre">Mat</span></code>. For instance, if a
<code class="docutils literal notranslate"><span class="pre">Mat</span></code> named <code class="docutils literal notranslate"><span class="pre">A</span></code> is to be accessed for reading via a row <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>
named <code class="docutils literal notranslate"><span class="pre">R</span></code> and a column <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> named <code class="docutils literal notranslate"><span class="pre">C</span></code>, this is accomplished by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="p">(</span><span class="n">pyop2</span><span class="o">.</span><span class="n">READ</span><span class="p">,</span> <span class="p">(</span><span class="n">R</span><span class="p">[</span><span class="n">pyop2</span><span class="o">.</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">C</span><span class="p">[</span><span class="n">pyop2</span><span class="o">.</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]]))</span>
</pre></div>
</div>
<p>Notice that it is <cite>always</cite> necessary to index the indirection maps
for a <code class="docutils literal notranslate"><span class="pre">Mat</span></code>. See the <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a> documentation for more
details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After executing <a class="reference internal" href="#pyop2.base.par_loop" title="pyop2.base.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">par_loop()</span></code></a>s that write to a <code class="docutils literal notranslate"><span class="pre">Mat</span></code> and
before using it (for example to view its values), you must call
<a class="reference internal" href="#pyop2.base.Mat.assemble" title="pyop2.base.Mat.assemble"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assemble()</span></code></a> to finalise the writes.</p>
</div>
<dl class="py attribute">
<dt id="pyop2.base.Mat.pack">
<code class="sig-name descname">pack</code><a class="headerlink" href="#pyop2.base.Mat.pack" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Mat.ASSEMBLED">
<code class="sig-name descname">ASSEMBLED</code><em class="property"> = 'ASSEMBLED'</em><a class="headerlink" href="#pyop2.base.Mat.ASSEMBLED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Mat.INSERT_VALUES">
<code class="sig-name descname">INSERT_VALUES</code><em class="property"> = 'INSERT_VALUES'</em><a class="headerlink" href="#pyop2.base.Mat.INSERT_VALUES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Mat.ADD_VALUES">
<code class="sig-name descname">ADD_VALUES</code><em class="property"> = 'ADD_VALUES'</em><a class="headerlink" href="#pyop2.base.Mat.ADD_VALUES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyop2.base.Mat.assemble">
<code class="sig-name descname">assemble</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Mat.assemble" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalise this <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a> ready for use.</p>
<p>Call this /after/ executing all the par_loops that write to
the matrix before you want to look at it.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Mat.addto_values">
<code class="sig-name descname">addto_values</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">cols</span></em>, <em class="sig-param"><span class="n">values</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Mat.addto_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a block of values to the <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Mat.set_values">
<code class="sig-name descname">set_values</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">cols</span></em>, <em class="sig-param"><span class="n">values</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Mat.set_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a block of values in the <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Mat.nblocks">
<code class="sig-name descname">nblocks</code><a class="headerlink" href="#pyop2.base.Mat.nblocks" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Mat.dims">
<code class="sig-name descname">dims</code><a class="headerlink" href="#pyop2.base.Mat.dims" title="Permalink to this definition">¶</a></dt>
<dd><p>A pair of integers giving the number of matrix rows and columns for
each member of the row <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> and column <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>
respectively. This corresponds to the <code class="docutils literal notranslate"><span class="pre">cdim</span></code> member of a
<a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Mat.nrows">
<code class="sig-name descname">nrows</code><a class="headerlink" href="#pyop2.base.Mat.nrows" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of rows in the matrix (local to this process)</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Mat.nblock_rows">
<code class="sig-name descname">nblock_rows</code><a class="headerlink" href="#pyop2.base.Mat.nblock_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>The number “block” rows in the matrix (local to this process).</p>
<p>This is equivalent to the number of rows in the matrix divided
by the dimension of the row <a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Mat.nblock_cols">
<code class="sig-name descname">nblock_cols</code><a class="headerlink" href="#pyop2.base.Mat.nblock_cols" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of “block” columns in the matrix (local to this process).</p>
<p>This is equivalent to the number of columns in the matrix
divided by the dimension of the column <a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Mat.ncols">
<code class="sig-name descname">ncols</code><a class="headerlink" href="#pyop2.base.Mat.ncols" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of columns in the matrix (local to this process)</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Mat.sparsity">
<code class="sig-name descname">sparsity</code><a class="headerlink" href="#pyop2.base.Mat.sparsity" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.base.Sparsity" title="pyop2.base.Sparsity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sparsity</span></code></a> on which the <code class="docutils literal notranslate"><span class="pre">Mat</span></code> is defined.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Mat.change_assembly_state">
<code class="sig-name descname">change_assembly_state</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">new_state</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Mat.change_assembly_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch the matrix assembly state.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Mat.values">
<em class="property">property </em><code class="sig-name descname">values</code><a class="headerlink" href="#pyop2.base.Mat.values" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy array of matrix values.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is a dense array, so will need a lot of memory.  It’s
probably not a good idea to access this property if your
matrix has more than around 10000 degrees of freedom.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Mat.dtype">
<code class="sig-name descname">dtype</code><a class="headerlink" href="#pyop2.base.Mat.dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>The Python type of the data.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Mat.nbytes">
<code class="sig-name descname">nbytes</code><a class="headerlink" href="#pyop2.base.Mat.nbytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an estimate of the size of the data associated with this
<a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a> in bytes. This will be the correct size of the
data payload, but does not take into account the (presumably
small) overhead of the object and its metadata. The memory
associated with the sparsity pattern is also not recorded.</p>
<p>Note that this is the process local memory usage, not the sum
over all MPI processes.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.Kernel">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">Kernel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.Kernel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.caching.Cached" title="pyop2.caching.Cached"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.caching.Cached</span></code></a></p>
<p>OP2 kernel type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> – kernel function definition, including signature; either a
string or an AST <a class="reference internal" href="pyop2.codegen.html#pyop2.codegen.node.Node" title="pyop2.codegen.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></p></li>
<li><p><strong>name</strong> – kernel function name; must match the name of the kernel
function given in <cite>code</cite></p></li>
<li><p><strong>opts</strong> – options dictionary for <a class="reference internal" href="ir.html"><span class="doc">PyOP2 IR optimisations</span></a>
(optional, ignored if <cite>code</cite> is a string)</p></li>
<li><p><strong>include_dirs</strong> – list of additional include directories to be searched
when compiling the kernel (optional, defaults to empty)</p></li>
<li><p><strong>headers</strong> – list of system headers to include when compiling the kernel
in the form <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;header.h&gt;</span></code> (optional, defaults to empty)</p></li>
<li><p><strong>user_code</strong> – code snippet to be executed once at the very start of
the generated kernel wrapper code (optional, defaults to
empty)</p></li>
<li><p><strong>ldargs</strong> – A list of arguments to pass to the linker when
compiling this Kernel.</p></li>
<li><p><strong>requires_zeroed_output_arguments</strong> – Does this kernel require the
output arguments to be zeroed on entry when called? (default no)</p></li>
<li><p><strong>cpp</strong> – Is the kernel actually C++ rather than C?  If yes,
then compile with the C++ compiler (kernel is wrapped in
extern C for linkage reasons).</p></li>
</ul>
</dd>
</dl>
<p>Consider the case of initialising a <a class="reference internal" href="user.html#pyop2.Dat" title="pyop2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> with seeded random
values in the interval 0 to 1. The corresponding <a class="reference internal" href="user.html#pyop2.Kernel" title="pyop2.Kernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Kernel</span></code></a> is
constructed as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">op2</span><span class="o">.</span><span class="n">Kernel</span><span class="p">(</span><span class="s2">&quot;void setrand(double *x) { x[0] = (double)random()/RAND_MAX); }&quot;</span><span class="p">,</span>
           <span class="n">name</span><span class="o">=</span><span class="s2">&quot;setrand&quot;</span><span class="p">,</span>
           <span class="n">headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#include &lt;stdlib.h&gt;&quot;</span><span class="p">],</span> <span class="n">user_code</span><span class="o">=</span><span class="s2">&quot;srandom(10001);&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When running in parallel with MPI the generated code must be the same
on all ranks.</p>
</div>
<dl class="py method">
<dt id="pyop2.base.Kernel.name">
<em class="property">property </em><code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.base.Kernel.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Kernel name, must match the kernel function name in the code.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.Kernel.code">
<em class="property">property </em><code class="sig-name descname">code</code><a class="headerlink" href="#pyop2.base.Kernel.code" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.Kernel.num_flops">
<code class="sig-name descname">num_flops</code><a class="headerlink" href="#pyop2.base.Kernel.num_flops" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.base.JITModule">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">JITModule</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.JITModule" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.caching.Cached" title="pyop2.caching.Cached"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.caching.Cached</span></code></a></p>
<p>Cached module encapsulating the generated <a class="reference internal" href="#pyop2.base.ParLoop" title="pyop2.base.ParLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParLoop</span></code></a> stub.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note to implementors.  This object is <em>cached</em> and therefore
should not hold any references to objects you might want to be
collected (such PyOP2 data objects).</p>
</div>
</dd></dl>

<dl class="py class">
<dt id="pyop2.base.IterationRegion">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">IterationRegion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.IterationRegion" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.IntEnum</span></code></p>
<p>An enumeration.</p>
<dl class="py attribute">
<dt id="pyop2.base.IterationRegion.BOTTOM">
<code class="sig-name descname">BOTTOM</code><em class="property"> = 1</em><a class="headerlink" href="#pyop2.base.IterationRegion.BOTTOM" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.IterationRegion.TOP">
<code class="sig-name descname">TOP</code><em class="property"> = 2</em><a class="headerlink" href="#pyop2.base.IterationRegion.TOP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.IterationRegion.INTERIOR_FACETS">
<code class="sig-name descname">INTERIOR_FACETS</code><em class="property"> = 3</em><a class="headerlink" href="#pyop2.base.IterationRegion.INTERIOR_FACETS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.IterationRegion.ALL">
<code class="sig-name descname">ALL</code><em class="property"> = 4</em><a class="headerlink" href="#pyop2.base.IterationRegion.ALL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py data">
<dt id="pyop2.base.ON_BOTTOM">
<code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">ON_BOTTOM</code><em class="property"> = &lt;IterationRegion.BOTTOM: 1&gt;</em><a class="headerlink" href="#pyop2.base.ON_BOTTOM" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the cells at the bottom of the column in an extruded mesh.</p>
</dd></dl>

<dl class="py data">
<dt id="pyop2.base.ON_TOP">
<code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">ON_TOP</code><em class="property"> = &lt;IterationRegion.TOP: 2&gt;</em><a class="headerlink" href="#pyop2.base.ON_TOP" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the top cells in an extruded mesh.</p>
</dd></dl>

<dl class="py data">
<dt id="pyop2.base.ON_INTERIOR_FACETS">
<code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">ON_INTERIOR_FACETS</code><em class="property"> = &lt;IterationRegion.INTERIOR_FACETS: 3&gt;</em><a class="headerlink" href="#pyop2.base.ON_INTERIOR_FACETS" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the interior facets of an extruded mesh.</p>
</dd></dl>

<dl class="py data">
<dt id="pyop2.base.ALL">
<code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">ALL</code><em class="property"> = &lt;IterationRegion.ALL: 4&gt;</em><a class="headerlink" href="#pyop2.base.ALL" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all cells of an extruded mesh.</p>
</dd></dl>

<dl class="py class">
<dt id="pyop2.base.ParLoop">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">ParLoop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kernel</span></em>, <em class="sig-param"><span class="n">iterset</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.ParLoop" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Represents the kernel, iteration space and arguments of a parallel loop
invocation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Users should not directly construct <a class="reference internal" href="#pyop2.base.ParLoop" title="pyop2.base.ParLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParLoop</span></code></a> objects, but
use <a class="reference internal" href="#pyop2.op2.par_loop" title="pyop2.op2.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyop2.op2.par_loop()</span></code></a> instead.</p>
</div>
<p>An optional keyword argument, <code class="docutils literal notranslate"><span class="pre">iterate</span></code>, can be used to specify
which region of an <a class="reference internal" href="#pyop2.base.ExtrudedSet" title="pyop2.base.ExtrudedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtrudedSet</span></code></a> the parallel loop should
iterate over.</p>
<dl class="py method">
<dt id="pyop2.base.ParLoop.prepare_arglist">
<code class="sig-name descname">prepare_arglist</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterset</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.ParLoop.prepare_arglist" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare the argument list for calling generated code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iterset</strong> – The <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> iterated over.</p></li>
<li><p><strong>args</strong> – A list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Args</span></code>, the argument to the <a href="#id1"><span class="problematic" id="id2">:fn:`par_loop`</span></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.ParLoop.num_flops">
<code class="sig-name descname">num_flops</code><a class="headerlink" href="#pyop2.base.ParLoop.num_flops" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyop2.base.ParLoop.log_flops">
<code class="sig-name descname">log_flops</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">flops</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.ParLoop.log_flops" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyop2.base.ParLoop.compute">
<code class="sig-name descname">compute</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.ParLoop.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the kernel over all members of the iteration space.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.ParLoop.global_to_local_begin">
<code class="sig-name descname">global_to_local_begin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.ParLoop.global_to_local_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Start halo exchanges.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.ParLoop.global_to_local_end">
<code class="sig-name descname">global_to_local_end</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.ParLoop.global_to_local_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Finish halo exchanges</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.ParLoop.local_to_global_begin">
<code class="sig-name descname">local_to_global_begin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.ParLoop.local_to_global_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Start halo exchanges.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.ParLoop.local_to_global_end">
<code class="sig-name descname">local_to_global_end</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.ParLoop.local_to_global_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Finish halo exchanges (wait on irecvs)</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.ParLoop.reduction_begin">
<code class="sig-name descname">reduction_begin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.ParLoop.reduction_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Start reductions</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.ParLoop.reduction_end">
<code class="sig-name descname">reduction_end</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.ParLoop.reduction_end" title="Permalink to this definition">¶</a></dt>
<dd><p>End reductions</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.base.ParLoop.update_arg_data_state">
<code class="sig-name descname">update_arg_data_state</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.ParLoop.update_arg_data_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the state of the <a class="reference internal" href="#pyop2.base.DataCarrier" title="pyop2.base.DataCarrier"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataCarrier</span></code></a>s in the arguments to the <cite>par_loop</cite>.</p>
<p>This marks <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a>s that need assembly.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.ParLoop.dat_args">
<code class="sig-name descname">dat_args</code><a class="headerlink" href="#pyop2.base.ParLoop.dat_args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.ParLoop.unique_dat_args">
<code class="sig-name descname">unique_dat_args</code><a class="headerlink" href="#pyop2.base.ParLoop.unique_dat_args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.ParLoop.global_reduction_args">
<code class="sig-name descname">global_reduction_args</code><a class="headerlink" href="#pyop2.base.ParLoop.global_reduction_args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.ParLoop.kernel">
<code class="sig-name descname">kernel</code><a class="headerlink" href="#pyop2.base.ParLoop.kernel" title="Permalink to this definition">¶</a></dt>
<dd><p>Kernel executed by this parallel loop.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.ParLoop.args">
<code class="sig-name descname">args</code><a class="headerlink" href="#pyop2.base.ParLoop.args" title="Permalink to this definition">¶</a></dt>
<dd><p>Arguments to this parallel loop.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.ParLoop.is_layered">
<code class="sig-name descname">is_layered</code><a class="headerlink" href="#pyop2.base.ParLoop.is_layered" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag which triggers extrusion</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.base.ParLoop.iteration_region">
<code class="sig-name descname">iteration_region</code><a class="headerlink" href="#pyop2.base.ParLoop.iteration_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the part of the mesh the parallel loop will
be iterating over. The effect is the loop only iterates over
a certain part of an extruded mesh, for example on top cells, bottom cells or
interior facets.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="pyop2.base.check_iterset">
<code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">check_iterset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span></em>, <em class="sig-param"><span class="n">iterset</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.check_iterset" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that the iteration set of the <a class="reference internal" href="#pyop2.base.ParLoop" title="pyop2.base.ParLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParLoop</span></code></a> matches the
iteration set of all its arguments. A <code class="xref py py-class docutils literal notranslate"><span class="pre">MapValueError</span></code> is raised
if this condition is not met.</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.base.par_loop">
<code class="sig-prename descclassname">pyop2.base.</code><code class="sig-name descname">par_loop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kernel</span></em>, <em class="sig-param"><span class="n">iterset</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.base.par_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Invocation of an OP2 kernel</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kernel</strong> – The <a class="reference internal" href="#pyop2.base.Kernel" title="pyop2.base.Kernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Kernel</span></code></a> to be executed.</p></li>
<li><p><strong>iterset</strong> – The iteration <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> over which the kernel should be
executed.</p></li>
<li><p><strong>*args</strong> – One or more <code class="xref py py-class docutils literal notranslate"><span class="pre">base.Arg</span></code>s constructed from a
<a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a>, <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> or <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a> using the call
syntax and passing in an optionally indexed <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>
through which this <code class="xref py py-class docutils literal notranslate"><span class="pre">base.Arg</span></code> is accessed and the
<code class="xref py py-class docutils literal notranslate"><span class="pre">base.Access</span></code> descriptor indicating how the
<a class="reference internal" href="#pyop2.base.Kernel" title="pyop2.base.Kernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Kernel</span></code></a> is going to access this data (see the example
below). These are the global data structures from and to
which the kernel will read and write.</p></li>
<li><p><strong>iterate</strong> – <p>Optionally specify which region of an
<a class="reference internal" href="#pyop2.base.ExtrudedSet" title="pyop2.base.ExtrudedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtrudedSet</span></code></a> to iterate over.
Valid values are:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ON_BOTTOM</span></code>: iterate over the bottom layer of cells.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ON_TOP</span></code> iterate over the top layer of cells.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ALL</span></code> iterate over all cells (the default if unspecified)</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ON_INTERIOR_FACETS</span></code> iterate over all the layers</dt><dd><p>except the top layer, accessing data two adjacent (in
the extruded direction) cells at a time.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>pass_layer_arg</strong> – Should the wrapper pass the current layer
into the kernel (as an <code class="docutils literal notranslate"><span class="pre">int</span></code>). Only makes sense for
indirect extruded iteration.</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is the caller’s responsibility that the number and type of all
<code class="xref py py-class docutils literal notranslate"><span class="pre">base.Arg</span></code>s passed to the <a class="reference internal" href="#pyop2.base.par_loop" title="pyop2.base.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">par_loop()</span></code></a> match those expected
by the <a class="reference internal" href="#pyop2.base.Kernel" title="pyop2.base.Kernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Kernel</span></code></a>. No runtime check is performed to ensure this!</p>
</div>
<p><a class="reference internal" href="#pyop2.base.par_loop" title="pyop2.base.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">par_loop()</span></code></a> invocation is illustrated by the following example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pyop2</span><span class="o">.</span><span class="n">par_loop</span><span class="p">(</span><span class="n">mass</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span>
               <span class="n">mat</span><span class="p">(</span><span class="n">pyop2</span><span class="o">.</span><span class="n">INC</span><span class="p">,</span> <span class="p">(</span><span class="n">elem_node</span><span class="p">[</span><span class="n">pyop2</span><span class="o">.</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]]),</span> <span class="n">elem_node</span><span class="p">[</span><span class="n">pyop2</span><span class="o">.</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span>
               <span class="n">coords</span><span class="p">(</span><span class="n">pyop2</span><span class="o">.</span><span class="n">READ</span><span class="p">,</span> <span class="n">elem_node</span><span class="p">))</span>
</pre></div>
</div>
<p>This example will execute the <a class="reference internal" href="#pyop2.base.Kernel" title="pyop2.base.Kernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Kernel</span></code></a> <code class="docutils literal notranslate"><span class="pre">mass</span></code> over the
<a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> <code class="docutils literal notranslate"><span class="pre">elements</span></code> executing 3x3 times for each
<a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> member, assuming the <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> <code class="docutils literal notranslate"><span class="pre">elem_node</span></code> is of arity 3.
The <a class="reference internal" href="#pyop2.base.Kernel" title="pyop2.base.Kernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Kernel</span></code></a> takes four arguments, the first is a <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a> named
<code class="docutils literal notranslate"><span class="pre">mat</span></code>, the second is a field named <code class="docutils literal notranslate"><span class="pre">coords</span></code>. The remaining two arguments
indicate which local iteration space point the kernel is to execute.</p>
<p>A <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a> requires a pair of <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> objects, one each
for the row and column spaces. In this case both are the same
<code class="docutils literal notranslate"><span class="pre">elem_node</span></code> map. The row <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> is indexed by the first
index in the local iteration space, indicated by the <code class="docutils literal notranslate"><span class="pre">0</span></code> index
to <code class="xref py py-data docutils literal notranslate"><span class="pre">pyop2.i</span></code>, while the column space is indexed by
the second local index.  The matrix is accessed to increment
values using the <code class="docutils literal notranslate"><span class="pre">pyop2.INC</span></code> access descriptor.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">coords</span></code> <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> is also accessed via the <code class="docutils literal notranslate"><span class="pre">elem_node</span></code>
<a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>, however no indices are passed so all entries of
<code class="docutils literal notranslate"><span class="pre">elem_node</span></code> for the relevant member of <code class="docutils literal notranslate"><span class="pre">elements</span></code> will be
passed to the kernel as a vector.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

</div>
<div class="section" id="module-pyop2.caching">
<span id="pyop2-caching-module"></span><h2>pyop2.caching module<a class="headerlink" href="#module-pyop2.caching" title="Permalink to this headline">¶</a></h2>
<p>Provides common base classes for cached objects.</p>
<dl class="py function">
<dt id="pyop2.caching.report_cache">
<code class="sig-prename descclassname">pyop2.caching.</code><code class="sig-name descname">report_cache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">typ</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.caching.report_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Report the size of caches of type <code class="docutils literal notranslate"><span class="pre">typ</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>typ</strong> – A class of cached object.  For example
<a class="reference internal" href="#pyop2.caching.ObjectCached" title="pyop2.caching.ObjectCached"><code class="xref py py-class docutils literal notranslate"><span class="pre">ObjectCached</span></code></a> or <a class="reference internal" href="#pyop2.caching.Cached" title="pyop2.caching.Cached"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cached</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="pyop2.caching.ObjectCached">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.caching.</code><code class="sig-name descname">ObjectCached</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.caching.ObjectCached" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class for objects that should be cached on another object.</p>
<p>Derived classes need to implement classmethods
<code class="xref py py-meth docutils literal notranslate"><span class="pre">_process_args()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">_cache_key()</span></code> (which see for more
details).  The object on which the cache is stored should contain
a dict in its <code class="docutils literal notranslate"><span class="pre">_cache</span></code> attribute.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This kind of cache sets up a circular reference.  If either of
the objects implements <code class="docutils literal notranslate"><span class="pre">__del__</span></code>, the Python garbage
collector will not be able to collect this cycle, and hence
the cache will never be evicted.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The derived class’ <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code> is still called if the
object is retrieved from cache. If that is not desired,
derived classes can set a flag indicating whether the
constructor has already been called and immediately return
from <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code> if the flag is set. Otherwise the object
will be re-initialized even if it was returned from cache!</p>
</div>
</dd></dl>

<dl class="py class">
<dt id="pyop2.caching.Cached">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.caching.</code><code class="sig-name descname">Cached</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.caching.Cached" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class providing global caching of objects. Derived classes need to
implement classmethods <code class="xref py py-meth docutils literal notranslate"><span class="pre">_process_args()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">_cache_key()</span></code>
and define a class attribute <code class="xref py py-attr docutils literal notranslate"><span class="pre">_cache</span></code> of type <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The derived class’ <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code> is still called if the object is
retrieved from cache. If that is not desired, derived classes can set
a flag indicating whether the constructor has already been called and
immediately return from <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code> if the flag is set. Otherwise
the object will be re-initialized even if it was returned from cache!</p>
</div>
<dl class="py attribute">
<dt id="pyop2.caching.Cached.cache_key">
<code class="sig-name descname">cache_key</code><a class="headerlink" href="#pyop2.caching.Cached.cache_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Cache key.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pyop2.compilation">
<span id="pyop2-compilation-module"></span><h2>pyop2.compilation module<a class="headerlink" href="#module-pyop2.compilation" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="pyop2.compilation.CompilerInfo">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.compilation.</code><code class="sig-name descname">CompilerInfo</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">compiler</span></em>, <em class="sig-param"><span class="n">version</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.compilation.CompilerInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<p>Create new instance of CompilerInfo(compiler, version)</p>
<dl class="py method">
<dt id="pyop2.compilation.CompilerInfo.compiler">
<em class="property">property </em><code class="sig-name descname">compiler</code><a class="headerlink" href="#pyop2.compilation.CompilerInfo.compiler" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.compilation.CompilerInfo.version">
<em class="property">property </em><code class="sig-name descname">version</code><a class="headerlink" href="#pyop2.compilation.CompilerInfo.version" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="pyop2.compilation.sniff_compiler_version">
<code class="sig-prename descclassname">pyop2.compilation.</code><code class="sig-name descname">sniff_compiler_version</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cc</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.compilation.sniff_compiler_version" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="pyop2.compilation.compilation_comm">
<code class="sig-prename descclassname">pyop2.compilation.</code><code class="sig-name descname">compilation_comm</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">comm</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.compilation.compilation_comm" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a communicator for compilation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>comm</strong> – The input communicator.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A communicator used for compilation (may be smaller)</p>
</dd>
</dl>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py class">
<dt id="pyop2.compilation.Compiler">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.compilation.</code><code class="sig-name descname">Compiler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cc</span></em>, <em class="sig-param"><span class="n">ld</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cppargs</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">ldargs</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">cpp</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.compilation.Compiler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt id="pyop2.compilation.Compiler.compiler_versions">
<code class="sig-name descname">compiler_versions</code><em class="property"> = {}</em><a class="headerlink" href="#pyop2.compilation.Compiler.compiler_versions" title="Permalink to this definition">¶</a></dt>
<dd><p>A compiler for shared libraries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cc</strong> – C compiler executable (can be overriden by exporting the
environment variable <code class="docutils literal notranslate"><span class="pre">CC</span></code>).</p></li>
<li><p><strong>ld</strong> – Linker executable (optional, if <code class="docutils literal notranslate"><span class="pre">None</span></code>, we assume the compiler
can build object files and link in a single invocation, can be
overridden by exporting the environment variable <code class="docutils literal notranslate"><span class="pre">LDSHARED</span></code>).</p></li>
<li><p><strong>cppargs</strong> – A list of arguments to the C compiler (optional, prepended to
any flags specified as the cflags configuration option)</p></li>
<li><p><strong>ldargs</strong> – A list of arguments to the linker (optional, prepended to any
flags specified as the ldflags configuration option).</p></li>
<li><p><strong>cpp</strong> – Should we try and use the C++ compiler instead of the C
compiler?.</p></li>
<li><p><strong>comm</strong> – Optional communicator to compile the code on
(defaults to COMM_WORLD).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyop2.compilation.Compiler.compiler_version">
<em class="property">property </em><code class="sig-name descname">compiler_version</code><a class="headerlink" href="#pyop2.compilation.Compiler.compiler_version" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyop2.compilation.Compiler.workaround_cflags">
<em class="property">property </em><code class="sig-name descname">workaround_cflags</code><a class="headerlink" href="#pyop2.compilation.Compiler.workaround_cflags" title="Permalink to this definition">¶</a></dt>
<dd><p>Flags to work around bugs in compilers.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.compilation.Compiler.get_so">
<code class="sig-name descname">get_so</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">jitmodule</span></em>, <em class="sig-param"><span class="n">extension</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.compilation.Compiler.get_so" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a shared library and load it</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jitmodule</strong> – The JIT Module which can generate the code to compile.</p></li>
<li><p><strong>extension</strong> – extension of the source file (c, cpp).</p></li>
</ul>
</dd>
</dl>
<p>Returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">ctypes.CDLL</span></code> object of the resulting shared
library.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.compilation.MacCompiler">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.compilation.</code><code class="sig-name descname">MacCompiler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cppargs</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">ldargs</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">cpp</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.compilation.MacCompiler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.compilation.Compiler" title="pyop2.compilation.Compiler"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.compilation.Compiler</span></code></a></p>
<p>A compiler for building a shared library on mac systems.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cppargs</strong> – A list of arguments to pass to the C compiler
(optional).</p></li>
<li><p><strong>ldargs</strong> – A list of arguments to pass to the linker (optional).</p></li>
<li><p><strong>cpp</strong> – Are we actually using the C++ compiler?</p></li>
<li><p><strong>comm</strong> – Optional communicator to compile the code on (only
rank 0 compiles code) (defaults to COMM_WORLD).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="pyop2.compilation.LinuxCompiler">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.compilation.</code><code class="sig-name descname">LinuxCompiler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cppargs</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">ldargs</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">cpp</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.compilation.LinuxCompiler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.compilation.Compiler" title="pyop2.compilation.Compiler"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.compilation.Compiler</span></code></a></p>
<p>A compiler for building a shared library on linux systems.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cppargs</strong> – A list of arguments to pass to the C compiler
(optional).</p></li>
<li><p><strong>ldargs</strong> – A list of arguments to pass to the linker (optional).</p></li>
<li><p><strong>cpp</strong> – Are we actually using the C++ compiler?</p></li>
<li><p><strong>comm</strong> – Optional communicator to compile the code on (only</p></li>
</ul>
</dd>
</dl>
<p>rank 0 compiles code) (defaults to COMM_WORLD).</p>
</dd></dl>

<dl class="py class">
<dt id="pyop2.compilation.LinuxIntelCompiler">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.compilation.</code><code class="sig-name descname">LinuxIntelCompiler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cppargs</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">ldargs</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">cpp</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.compilation.LinuxIntelCompiler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.compilation.Compiler" title="pyop2.compilation.Compiler"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.compilation.Compiler</span></code></a></p>
<p>The intel compiler for building a shared library on linux systems.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cppargs</strong> – A list of arguments to pass to the C compiler
(optional).</p></li>
<li><p><strong>ldargs</strong> – A list of arguments to pass to the linker (optional).</p></li>
<li><p><strong>cpp</strong> – Are we actually using the C++ compiler?</p></li>
<li><p><strong>comm</strong> – Optional communicator to compile the code on (only
rank 0 compiles code) (defaults to COMM_WORLD).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pyop2.compilation.load">
<code class="sig-prename descclassname">pyop2.compilation.</code><code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">jitmodule</span></em>, <em class="sig-param"><span class="n">extension</span></em>, <em class="sig-param"><span class="n">fn_name</span></em>, <em class="sig-param"><span class="n">cppargs</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">ldargs</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">argtypes</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">restype</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">compiler</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.compilation.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a shared library and return a function pointer from it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jitmodule</strong> – The JIT Module which can generate the code to compile, or
the string representing the source code.</p></li>
<li><p><strong>extension</strong> – extension of the source file (c, cpp)</p></li>
<li><p><strong>fn_name</strong> – The name of the function to return from the resulting library</p></li>
<li><p><strong>cppargs</strong> – A list of arguments to the C compiler (optional)</p></li>
<li><p><strong>ldargs</strong> – A list of arguments to the linker (optional)</p></li>
<li><p><strong>argtypes</strong> – A list of ctypes argument types matching the arguments of
the returned function (optional, pass <code class="docutils literal notranslate"><span class="pre">None</span></code> for <code class="docutils literal notranslate"><span class="pre">void</span></code>). This is
only used when string is passed in instead of JITModule.</p></li>
<li><p><strong>restype</strong> – The return type of the function (optional, pass
<code class="docutils literal notranslate"><span class="pre">None</span></code> for <code class="docutils literal notranslate"><span class="pre">void</span></code>).</p></li>
<li><p><strong>compiler</strong> – The name of the C compiler (intel, <code class="docutils literal notranslate"><span class="pre">None</span></code> for default).</p></li>
<li><p><strong>comm</strong> – Optional communicator to compile the code on (only
rank 0 compiles code) (defaults to COMM_WORLD).</p></li>
</ul>
</dd>
</dl>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.compilation.clear_cache">
<code class="sig-prename descclassname">pyop2.compilation.</code><code class="sig-name descname">clear_cache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">prompt</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.compilation.clear_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the PyOP2 compiler cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>prompt</strong> – if <code class="docutils literal notranslate"><span class="pre">True</span></code> prompt before removing any files</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyop2.configuration">
<span id="pyop2-configuration-module"></span><h2>pyop2.configuration module<a class="headerlink" href="#module-pyop2.configuration" title="Permalink to this headline">¶</a></h2>
<p>PyOP2 global configuration.</p>
<dl class="py class">
<dt id="pyop2.configuration.Configuration">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.configuration.</code><code class="sig-name descname">Configuration</code><a class="headerlink" href="#pyop2.configuration.Configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>PyOP2 configuration parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>compiler</strong> – compiler identifier (one of <cite>gcc</cite>, <cite>icc</cite>).</p></li>
<li><p><strong>simd_width</strong> – number of doubles in SIMD instructions
(e.g. 4 for AVX2, 8 for AVX512).</p></li>
<li><p><strong>cflags</strong> – extra flags to be passed to the C compiler.</p></li>
<li><p><strong>ldflags</strong> – extra flags to be passed to the linker.</p></li>
<li><p><strong>debug</strong> – Turn on debugging for generated code (turns off
compiler optimisations).</p></li>
<li><p><strong>type_check</strong> – Should PyOP2 type-check API-calls?  (Default,
yes)</p></li>
<li><p><strong>check_src_hashes</strong> – Should PyOP2 check that generated code is
the same on all processes?  (Default, yes).  Uses an allreduce.</p></li>
<li><p><strong>cache_dir</strong> – Where should generated code be cached?</p></li>
<li><p><strong>node_local_compilation</strong> – <p>Should generated code by compiled
“node-local” (one process for each set of processes that share</p>
<blockquote>
<div><p>a filesystem)?  You should probably arrange to set cache_dir
to a node-local filesystem too.</p>
</div></blockquote>
</p></li>
<li><p><strong>log_level</strong> – How chatty should PyOP2 be?  Valid values
are “DEBUG”, “INFO”, “WARNING”, “ERROR”, “CRITICAL”.</p></li>
<li><p><strong>use_safe_cflags</strong> – Apply cflags turning off some compiler
optimisations that are known to be buggy on particular
versions? See <a class="reference internal" href="#pyop2.compilation.Compiler.workaround_cflags" title="pyop2.compilation.Compiler.workaround_cflags"><code class="xref py py-attr docutils literal notranslate"><span class="pre">workaround_cflags</span></code></a> for details.</p></li>
<li><p><strong>dump_gencode</strong> – Should PyOP2 write the generated code
somewhere for inspection?</p></li>
<li><p><strong>print_cache_size</strong> – Should PyOP2 print the size of caches at
program exit?</p></li>
<li><p><strong>print_summary</strong> – Should PyOP2 print a summary of timings at
program exit?</p></li>
<li><p><strong>matnest</strong> – Should matrices on mixed maps be built as nests? (Default yes)</p></li>
<li><p><strong>block_sparsity</strong> – Should sparsity patterns on datasets with
cdim &gt; 1 be built as block sparsities, or dof sparsities.  The
former saves memory but changes which preconditioners are
available for the resulting matrices.  (Default yes)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="pyop2.configuration.Configuration.DEFAULTS">
<code class="sig-name descname">DEFAULTS</code><em class="property"> = {'block_sparsity': ('PYOP2_BLOCK_SPARSITY', &lt;class 'bool'&gt;, True), 'cache_dir': ('PYOP2_CACHE_DIR', &lt;class 'str'&gt;, '/tmp/pyop2-cache-uid1001'), 'cflags': ('PYOP2_CFLAGS', &lt;class 'str'&gt;, ''), 'check_src_hashes': ('PYOP2_CHECK_SRC_HASHES', &lt;class 'bool'&gt;, True), 'compiler': ('PYOP2_BACKEND_COMPILER', &lt;class 'str'&gt;, 'gcc'), 'compute_kernel_flops': ('PYOP2_COMPUTE_KERNEL_FLOPS', &lt;class 'bool'&gt;, False), 'debug': ('PYOP2_DEBUG', &lt;class 'bool'&gt;, False), 'dump_gencode': ('PYOP2_DUMP_GENCODE', &lt;class 'bool'&gt;, False), 'ldflags': ('PYOP2_LDFLAGS', &lt;class 'str'&gt;, ''), 'log_level': ('PYOP2_LOG_LEVEL', (&lt;class 'str'&gt;, &lt;class 'int'&gt;), 'WARNING'), 'matnest': ('PYOP2_MATNEST', &lt;class 'bool'&gt;, True), 'no_fork_available': ('PYOP2_NO_FORK_AVAILABLE', &lt;class 'bool'&gt;, False), 'node_local_compilation': ('PYOP2_NODE_LOCAL_COMPILATION', &lt;class 'bool'&gt;, True), 'print_cache_size': ('PYOP2_PRINT_CACHE_SIZE', &lt;class 'bool'&gt;, False), 'print_summary': ('PYOP2_PRINT_SUMMARY', &lt;class 'bool'&gt;, False), 'simd_width': ('PYOP2_SIMD_WIDTH', &lt;class 'int'&gt;, 4), 'type_check': ('PYOP2_TYPE_CHECK', &lt;class 'bool'&gt;, True), 'use_safe_cflags': ('PYOP2_USE_SAFE_CFLAGS', &lt;class 'bool'&gt;, True)}</em><a class="headerlink" href="#pyop2.configuration.Configuration.DEFAULTS" title="Permalink to this definition">¶</a></dt>
<dd><p>Default values for PyOP2 configuration parameters</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.configuration.Configuration.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.configuration.Configuration.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the configuration parameters to the default values.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.configuration.Configuration.reconfigure">
<code class="sig-name descname">reconfigure</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.configuration.Configuration.reconfigure" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the configuration parameters with new values.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.configuration.Configuration.unsafe_reconfigure">
<code class="sig-name descname">unsafe_reconfigure</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.configuration.Configuration.unsafe_reconfigure" title="Permalink to this definition">¶</a></dt>
<dd><p>“Unsafely reconfigure (just replacing the values)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pyop2.datatypes">
<span id="pyop2-datatypes-module"></span><h2>pyop2.datatypes module<a class="headerlink" href="#module-pyop2.datatypes" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="pyop2.datatypes.as_cstr">
<code class="sig-prename descclassname">pyop2.datatypes.</code><code class="sig-name descname">as_cstr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dtype</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.datatypes.as_cstr" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a numpy dtype like object to a C type as a string.</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.datatypes.as_ctypes">
<code class="sig-prename descclassname">pyop2.datatypes.</code><code class="sig-name descname">as_ctypes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dtype</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.datatypes.as_ctypes" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a numpy dtype like object to a ctypes type.</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.datatypes.dtype_limits">
<code class="sig-prename descclassname">pyop2.datatypes.</code><code class="sig-name descname">dtype_limits</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dtype</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.datatypes.dtype_limits" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to determine the min and max values of a datatype.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dtype</strong> – A numpy datatype.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a 2-tuple of min, max</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If numeric limits could not be determined.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyop2.exceptions">
<span id="pyop2-exceptions-module"></span><h2>pyop2.exceptions module<a class="headerlink" href="#module-pyop2.exceptions" title="Permalink to this headline">¶</a></h2>
<p>OP2 exception types</p>
<dl class="py exception">
<dt id="pyop2.exceptions.DataTypeError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">DataTypeError</code><a class="headerlink" href="#pyop2.exceptions.DataTypeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></p>
<p>Invalid type for data.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.DimTypeError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">DimTypeError</code><a class="headerlink" href="#pyop2.exceptions.DimTypeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></p>
<p>Invalid type for dimension.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.ArityTypeError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">ArityTypeError</code><a class="headerlink" href="#pyop2.exceptions.ArityTypeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></p>
<p>Invalid type for arity.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.IndexTypeError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">IndexTypeError</code><a class="headerlink" href="#pyop2.exceptions.IndexTypeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></p>
<p>Invalid type for index.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.NameTypeError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">NameTypeError</code><a class="headerlink" href="#pyop2.exceptions.NameTypeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></p>
<p>Invalid type for name.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.SetTypeError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">SetTypeError</code><a class="headerlink" href="#pyop2.exceptions.SetTypeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></p>
<p>Invalid type for <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.op2.Set</span></code></a>.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.SizeTypeError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">SizeTypeError</code><a class="headerlink" href="#pyop2.exceptions.SizeTypeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></p>
<p>Invalid type for size.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.SubsetIndexOutOfBounds">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">SubsetIndexOutOfBounds</code><a class="headerlink" href="#pyop2.exceptions.SubsetIndexOutOfBounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></p>
<p>Out of bound index.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.SparsityTypeError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">SparsityTypeError</code><a class="headerlink" href="#pyop2.exceptions.SparsityTypeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></p>
<p>Invalid type for <a class="reference internal" href="#pyop2.op2.Sparsity" title="pyop2.op2.Sparsity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.op2.Sparsity</span></code></a>.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.MapTypeError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">MapTypeError</code><a class="headerlink" href="#pyop2.exceptions.MapTypeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></p>
<p>Invalid type for <a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.op2.Map</span></code></a>.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.DataSetTypeError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">DataSetTypeError</code><a class="headerlink" href="#pyop2.exceptions.DataSetTypeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></p>
<p>Invalid type for <a class="reference internal" href="#pyop2.op2.DataSet" title="pyop2.op2.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.op2.DataSet</span></code></a>.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.MatTypeError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">MatTypeError</code><a class="headerlink" href="#pyop2.exceptions.MatTypeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></p>
<p>Invalid type for <a class="reference internal" href="#pyop2.op2.Mat" title="pyop2.op2.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.op2.Mat</span></code></a>.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.DatTypeError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">DatTypeError</code><a class="headerlink" href="#pyop2.exceptions.DatTypeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></p>
<p>Invalid type for <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.op2.Dat</span></code></a>.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.KernelTypeError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">KernelTypeError</code><a class="headerlink" href="#pyop2.exceptions.KernelTypeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></p>
<p>Invalid type for <a class="reference internal" href="#pyop2.op2.Kernel" title="pyop2.op2.Kernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.op2.Kernel</span></code></a>.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.DataValueError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">DataValueError</code><a class="headerlink" href="#pyop2.exceptions.DataValueError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></p>
<p>Illegal value for data.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.IndexValueError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">IndexValueError</code><a class="headerlink" href="#pyop2.exceptions.IndexValueError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></p>
<p>Illegal value for index.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.ModeValueError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">ModeValueError</code><a class="headerlink" href="#pyop2.exceptions.ModeValueError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></p>
<p>Illegal value for mode.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.IterateValueError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">IterateValueError</code><a class="headerlink" href="#pyop2.exceptions.IterateValueError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></p>
<p>Illegal value for iterate.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.SetValueError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">SetValueError</code><a class="headerlink" href="#pyop2.exceptions.SetValueError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></p>
<p>Illegal value for <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.op2.Set</span></code></a>.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.MapValueError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">MapValueError</code><a class="headerlink" href="#pyop2.exceptions.MapValueError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></p>
<p>Illegal value for <a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.op2.Map</span></code></a>.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.ConfigurationError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">ConfigurationError</code><a class="headerlink" href="#pyop2.exceptions.ConfigurationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">RuntimeError</span></code></p>
<p>Illegal configuration value or type.</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.CompilationError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">CompilationError</code><a class="headerlink" href="#pyop2.exceptions.CompilationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">RuntimeError</span></code></p>
<p>Error during JIT compilation</p>
</dd></dl>

<dl class="py exception">
<dt id="pyop2.exceptions.SparsityFormatError">
<em class="property">exception </em><code class="sig-prename descclassname">pyop2.exceptions.</code><code class="sig-name descname">SparsityFormatError</code><a class="headerlink" href="#pyop2.exceptions.SparsityFormatError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></p>
<p>Unable to produce a sparsity for this matrix format.</p>
</dd></dl>

</div>
<div class="section" id="module-pyop2.logger">
<span id="pyop2-logger-module"></span><h2>pyop2.logger module<a class="headerlink" href="#module-pyop2.logger" title="Permalink to this headline">¶</a></h2>
<p>The PyOP2 logger, based on the Python standard library logging module.</p>
<dl class="py function">
<dt id="pyop2.logger.set_log_level">
<code class="sig-prename descclassname">pyop2.logger.</code><code class="sig-name descname">set_log_level</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">level</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.logger.set_log_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the log level of the PyOP2 logger.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>level</strong> – the log level. Valid values: DEBUG, INFO, WARNING, ERROR, CRITICAL</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pyop2.logger.log">
<code class="sig-prename descclassname">pyop2.logger.</code><code class="sig-name descname">log</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">level</span></em>, <em class="sig-param"><span class="n">msg</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.logger.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Print ‘msg % args’ with the severity ‘level’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>level</strong> – the log level. Valid values: DEBUG, INFO, WARNING, ERROR, CRITICAL</p></li>
<li><p><strong>msg</strong> – the message</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pyop2.logger.progress">
<code class="sig-prename descclassname">pyop2.logger.</code><code class="sig-name descname">progress</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">level</span></em>, <em class="sig-param"><span class="n">msg</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.logger.progress" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager to print a progress message.</p>
<p>The block is wrapped in <code class="docutils literal notranslate"><span class="pre">msg...</span></code>, <code class="docutils literal notranslate"><span class="pre">msg...done</span></code> log messages
with an appropriate indent (to distinguish nested message).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>level</strong> – the log level.  See <a class="reference internal" href="#pyop2.logger.log" title="pyop2.logger.log"><code class="xref py py-func docutils literal notranslate"><span class="pre">log()</span></code></a> for valid values</p></li>
<li><p><strong>msg</strong> – the message.</p></li>
</ul>
</dd>
</dl>
<p>See <a class="reference internal" href="#pyop2.logger.log" title="pyop2.logger.log"><code class="xref py py-func docutils literal notranslate"><span class="pre">log()</span></code></a> for more details.</p>
</dd></dl>

</div>
<div class="section" id="module-pyop2.mpi">
<span id="pyop2-mpi-module"></span><h2>pyop2.mpi module<a class="headerlink" href="#module-pyop2.mpi" title="Permalink to this headline">¶</a></h2>
<p>PyOP2 MPI communicator.</p>
<dl class="py function">
<dt id="pyop2.mpi.dup_comm">
<code class="sig-prename descclassname">pyop2.mpi.</code><code class="sig-name descname">dup_comm</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">comm_in</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.mpi.dup_comm" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a communicator return a communicator for internal use.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>comm_in</strong> – Communicator to duplicate.  If not provided,
defaults to COMM_WORLD.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An mpi4py communicator.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyop2.op2">
<span id="pyop2-op2-module"></span><h2>pyop2.op2 module<a class="headerlink" href="#module-pyop2.op2" title="Permalink to this headline">¶</a></h2>
<p>The PyOP2 API specification.</p>
<dl class="py function">
<dt id="pyop2.op2.debug">
<code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">debug</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Log ‘msg % args’ with severity ‘DEBUG’.</p>
<p>To pass exception information, use the keyword argument exc_info with
a true value, e.g.</p>
<p>logger.debug(“Houston, we have a %s”, “thorny problem”, exc_info=1)</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.op2.info">
<code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Log ‘msg % args’ with severity ‘INFO’.</p>
<p>To pass exception information, use the keyword argument exc_info with
a true value, e.g.</p>
<p>logger.info(“Houston, we have a %s”, “interesting problem”, exc_info=1)</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.op2.warning">
<code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">warning</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.warning" title="Permalink to this definition">¶</a></dt>
<dd><p>Log ‘msg % args’ with severity ‘WARNING’.</p>
<p>To pass exception information, use the keyword argument exc_info with
a true value, e.g.</p>
<p>logger.warning(“Houston, we have a %s”, “bit of a problem”, exc_info=1)</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.op2.error">
<code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">error</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Log ‘msg % args’ with severity ‘ERROR’.</p>
<p>To pass exception information, use the keyword argument exc_info with
a true value, e.g.</p>
<p>logger.error(“Houston, we have a %s”, “major problem”, exc_info=1)</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.op2.critical">
<code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">critical</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.critical" title="Permalink to this definition">¶</a></dt>
<dd><p>Log ‘msg % args’ with severity ‘CRITICAL’.</p>
<p>To pass exception information, use the keyword argument exc_info with
a true value, e.g.</p>
<p>logger.critical(“Houston, we have a %s”, “major disaster”, exc_info=1)</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.op2.initialised">
<code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">initialised</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.initialised" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether PyOP2 has been yet initialised but not yet finalised.</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.op2.set_log_level">
<code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">set_log_level</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">level</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.set_log_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the log level of the PyOP2 logger.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>level</strong> – the log level. Valid values: DEBUG, INFO, WARNING, ERROR, CRITICAL</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pyop2.op2.init">
<code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">init</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise PyOP2: select the backend and potentially other configuration
options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>debug</strong> – The level of debugging output.</p></li>
<li><p><strong>comm</strong> – The MPI communicator to use for parallel communication,
defaults to <cite>MPI_COMM_WORLD</cite></p></li>
<li><p><strong>log_level</strong> – The log level. Options: DEBUG, INFO, WARNING, ERROR, CRITICAL</p></li>
</ul>
</dd>
</dl>
<p>For debugging purposes, <cite>init</cite> accepts all keyword arguments
accepted by the PyOP2 <code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code> object, see
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Configuration.__init__()</span></code> for details of further accepted
options.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calling <code class="docutils literal notranslate"><span class="pre">init</span></code> again with a different backend raises an exception.
Changing the backend is not possible. Calling <code class="docutils literal notranslate"><span class="pre">init</span></code> again with the
same backend or not specifying a backend will update the configuration.
Calling <code class="docutils literal notranslate"><span class="pre">init</span></code> after <code class="docutils literal notranslate"><span class="pre">exit</span></code> has been called is an error and will
raise an exception.</p>
</div>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.op2.exit">
<code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">exit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Exit OP2 and clean up</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py class">
<dt id="pyop2.op2.Kernel">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">Kernel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Kernel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.caching.Cached" title="pyop2.caching.Cached"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.caching.Cached</span></code></a></p>
<p>OP2 kernel type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> – kernel function definition, including signature; either a
string or an AST <a class="reference internal" href="pyop2.codegen.html#pyop2.codegen.node.Node" title="pyop2.codegen.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></p></li>
<li><p><strong>name</strong> – kernel function name; must match the name of the kernel
function given in <cite>code</cite></p></li>
<li><p><strong>opts</strong> – options dictionary for <a class="reference internal" href="ir.html"><span class="doc">PyOP2 IR optimisations</span></a>
(optional, ignored if <cite>code</cite> is a string)</p></li>
<li><p><strong>include_dirs</strong> – list of additional include directories to be searched
when compiling the kernel (optional, defaults to empty)</p></li>
<li><p><strong>headers</strong> – list of system headers to include when compiling the kernel
in the form <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;header.h&gt;</span></code> (optional, defaults to empty)</p></li>
<li><p><strong>user_code</strong> – code snippet to be executed once at the very start of
the generated kernel wrapper code (optional, defaults to
empty)</p></li>
<li><p><strong>ldargs</strong> – A list of arguments to pass to the linker when
compiling this Kernel.</p></li>
<li><p><strong>requires_zeroed_output_arguments</strong> – Does this kernel require the
output arguments to be zeroed on entry when called? (default no)</p></li>
<li><p><strong>cpp</strong> – Is the kernel actually C++ rather than C?  If yes,
then compile with the C++ compiler (kernel is wrapped in
extern C for linkage reasons).</p></li>
</ul>
</dd>
</dl>
<p>Consider the case of initialising a <a class="reference internal" href="user.html#pyop2.Dat" title="pyop2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> with seeded random
values in the interval 0 to 1. The corresponding <a class="reference internal" href="user.html#pyop2.Kernel" title="pyop2.Kernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Kernel</span></code></a> is
constructed as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">op2</span><span class="o">.</span><span class="n">Kernel</span><span class="p">(</span><span class="s2">&quot;void setrand(double *x) { x[0] = (double)random()/RAND_MAX); }&quot;</span><span class="p">,</span>
           <span class="n">name</span><span class="o">=</span><span class="s2">&quot;setrand&quot;</span><span class="p">,</span>
           <span class="n">headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#include &lt;stdlib.h&gt;&quot;</span><span class="p">],</span> <span class="n">user_code</span><span class="o">=</span><span class="s2">&quot;srandom(10001);&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When running in parallel with MPI the generated code must be the same
on all ranks.</p>
</div>
<dl class="py method">
<dt id="pyop2.op2.Kernel.name">
<em class="property">property </em><code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.op2.Kernel.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Kernel name, must match the kernel function name in the code.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.op2.Kernel.code">
<em class="property">property </em><code class="sig-name descname">code</code><a class="headerlink" href="#pyop2.op2.Kernel.code" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Kernel.num_flops">
<code class="sig-name descname">num_flops</code><a class="headerlink" href="#pyop2.op2.Kernel.num_flops" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.op2.Set">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">Set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">halo</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Set" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>OP2 set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>integer</em><em> or </em><em>list of four integers.</em>) – The size of the set.</p></li>
<li><p><strong>name</strong> (<em>string</em>) – The name of the set (optional).</p></li>
<li><p><strong>halo</strong> – An exisiting halo to use (optional).</p></li>
</ul>
</dd>
</dl>
<p>When the set is employed as an iteration space in a
<a class="reference internal" href="#pyop2.op2.par_loop" title="pyop2.op2.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyop2.op2.par_loop()</span></code></a>, the extent of any local iteration space within
each set entry is indicated in brackets. See the example in
<a class="reference internal" href="#pyop2.op2.par_loop" title="pyop2.op2.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyop2.op2.par_loop()</span></code></a> for more details.</p>
<p>The size of the set can either be an integer, or a list of four
integers.  The latter case is used for running in parallel where
we distinguish between:</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>CORE</cite> (owned and not touching halo)</p></li>
<li><p><cite>OWNED</cite> (owned, touching halo)</p></li>
<li><p><cite>EXECUTE HALO</cite> (not owned, but executed over redundantly)</p></li>
<li><p><cite>NON EXECUTE HALO</cite> (not owned, read when executing in the execute halo)</p></li>
</ul>
</div></blockquote>
<p>If a single integer is passed, we assume that we’re running in
serial and there is no distinction.</p>
<p>The division of set elements is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">CORE</span><span class="p">)</span>
<span class="p">[</span><span class="n">CORE</span><span class="p">,</span> <span class="n">OWNED</span><span class="p">)</span>
<span class="p">[</span><span class="n">OWNED</span><span class="p">,</span> <span class="n">GHOST</span><span class="p">)</span>
</pre></div>
</div>
<p>Halo send/receive data is stored on sets in a <a class="reference internal" href="#pyop2.op2.Halo" title="pyop2.op2.Halo"><code class="xref py py-class docutils literal notranslate"><span class="pre">Halo</span></code></a>.</p>
<dl class="py attribute">
<dt id="pyop2.op2.Set.core_size">
<code class="sig-name descname">core_size</code><a class="headerlink" href="#pyop2.op2.Set.core_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Core set size.  Owned elements not touching halo elements.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Set.size">
<code class="sig-name descname">size</code><a class="headerlink" href="#pyop2.op2.Set.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Set size, owned elements.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Set.total_size">
<code class="sig-name descname">total_size</code><a class="headerlink" href="#pyop2.op2.Set.total_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Set size including ghost elements.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Set.sizes">
<code class="sig-name descname">sizes</code><a class="headerlink" href="#pyop2.op2.Set.sizes" title="Permalink to this definition">¶</a></dt>
<dd><p>Set sizes: core, owned, execute halo, total.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Set.core_part">
<code class="sig-name descname">core_part</code><a class="headerlink" href="#pyop2.op2.Set.core_part" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Set.owned_part">
<code class="sig-name descname">owned_part</code><a class="headerlink" href="#pyop2.op2.Set.owned_part" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Set.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.op2.Set.name" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined label</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Set.halo">
<code class="sig-name descname">halo</code><a class="headerlink" href="#pyop2.op2.Set.halo" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.op2.Halo" title="pyop2.op2.Halo"><code class="xref py py-class docutils literal notranslate"><span class="pre">Halo</span></code></a> associated with this Set</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.op2.Set.partition_size">
<em class="property">property </em><code class="sig-name descname">partition_size</code><a class="headerlink" href="#pyop2.op2.Set.partition_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Default partition size</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Set.layers">
<code class="sig-name descname">layers</code><a class="headerlink" href="#pyop2.op2.Set.layers" title="Permalink to this definition">¶</a></dt>
<dd><p>Return None (not an <a class="reference internal" href="#pyop2.op2.ExtrudedSet" title="pyop2.op2.ExtrudedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtrudedSet</span></code></a>).</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.op2.ExtrudedSet">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">ExtrudedSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">parent</span></em>, <em class="sig-param"><span class="n">layers</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.ExtrudedSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Set</span></code></a></p>
<p>OP2 ExtrudedSet.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parent</strong> (a <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>.) – The parent <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> to build this <a class="reference internal" href="#pyop2.op2.ExtrudedSet" title="pyop2.op2.ExtrudedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtrudedSet</span></code></a> on top of</p></li>
<li><p><strong>layers</strong> (an integer, indicating the number of layers for every entity,
or an array of shape (parent.total_size, 2) giving the start
and one past the stop layer for every entity.  An entry
<code class="docutils literal notranslate"><span class="pre">a,</span> <span class="pre">b</span> <span class="pre">=</span> <span class="pre">layers[e,</span> <span class="pre">...]</span></code> means that the layers for entity
<code class="docutils literal notranslate"><span class="pre">e</span></code> run over <span class="math">[a, b)</span>.) – The number of layers in this <a class="reference internal" href="#pyop2.op2.ExtrudedSet" title="pyop2.op2.ExtrudedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtrudedSet</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<p>The number of layers indicates the number of time the base set is
extruded in the direction of the <a class="reference internal" href="#pyop2.op2.ExtrudedSet" title="pyop2.op2.ExtrudedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtrudedSet</span></code></a>.  As a
result, there are <code class="docutils literal notranslate"><span class="pre">layers-1</span></code> extruded “cells” in an extruded set.</p>
<dl class="py attribute">
<dt id="pyop2.op2.ExtrudedSet.parent">
<code class="sig-name descname">parent</code><a class="headerlink" href="#pyop2.op2.ExtrudedSet.parent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.ExtrudedSet.layers">
<code class="sig-name descname">layers</code><a class="headerlink" href="#pyop2.op2.ExtrudedSet.layers" title="Permalink to this definition">¶</a></dt>
<dd><p>The layers of this extruded set.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.ExtrudedSet.layers_array">
<code class="sig-name descname">layers_array</code><a class="headerlink" href="#pyop2.op2.ExtrudedSet.layers_array" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.op2.MixedSet">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">MixedSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.MixedSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Set" title="pyop2.base.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Set</span></code></a>, <a class="reference internal" href="#pyop2.caching.ObjectCached" title="pyop2.caching.ObjectCached"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.caching.ObjectCached</span></code></a></p>
<p>A container for a bag of <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>s.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sets</strong> (<em>iterable</em>) – Iterable of <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>s or <a class="reference internal" href="#pyop2.op2.ExtrudedSet" title="pyop2.op2.ExtrudedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtrudedSet</span></code></a>s</p>
</dd>
</dl>
<dl class="py attribute">
<dt id="pyop2.op2.MixedSet.split">
<code class="sig-name descname">split</code><a class="headerlink" href="#pyop2.op2.MixedSet.split" title="Permalink to this definition">¶</a></dt>
<dd><p>The underlying tuple of <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>s.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedSet.core_size">
<code class="sig-name descname">core_size</code><a class="headerlink" href="#pyop2.op2.MixedSet.core_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Core set size. Owned elements not touching halo elements.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedSet.size">
<code class="sig-name descname">size</code><a class="headerlink" href="#pyop2.op2.MixedSet.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Set size, owned elements.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedSet.total_size">
<code class="sig-name descname">total_size</code><a class="headerlink" href="#pyop2.op2.MixedSet.total_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Total set size, including halo elements.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedSet.sizes">
<code class="sig-name descname">sizes</code><a class="headerlink" href="#pyop2.op2.MixedSet.sizes" title="Permalink to this definition">¶</a></dt>
<dd><p>Set sizes: core, owned, execute halo, total.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedSet.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.op2.MixedSet.name" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined labels.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedSet.halo">
<code class="sig-name descname">halo</code><a class="headerlink" href="#pyop2.op2.MixedSet.halo" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.op2.Halo" title="pyop2.op2.Halo"><code class="xref py py-class docutils literal notranslate"><span class="pre">Halo</span></code></a>s associated with these <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>s.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedSet.layers">
<code class="sig-name descname">layers</code><a class="headerlink" href="#pyop2.op2.MixedSet.layers" title="Permalink to this definition">¶</a></dt>
<dd><p>Numbers of layers in the extruded mesh (or None if this MixedSet is not extruded).</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.op2.Subset">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">Subset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">superset</span></em>, <em class="sig-param"><span class="n">indices</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.ExtrudedSet" title="pyop2.base.ExtrudedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.ExtrudedSet</span></code></a></p>
<p>OP2 subset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>superset</strong> (a <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> or a <a class="reference internal" href="#pyop2.op2.Subset" title="pyop2.op2.Subset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subset</span></code></a>.) – The superset of the subset.</p></li>
<li><p><strong>indices</strong> (<em>a list of integers</em><em>, or </em><em>a numpy array.</em>) – Elements of the superset that form the
subset. Duplicate values are removed when constructing the subset.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="pyop2.op2.Subset.superset">
<code class="sig-name descname">superset</code><a class="headerlink" href="#pyop2.op2.Subset.superset" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the superset Set</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Subset.indices">
<code class="sig-name descname">indices</code><a class="headerlink" href="#pyop2.op2.Subset.indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the indices pointing in the superset.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Subset.layers_array">
<code class="sig-name descname">layers_array</code><a class="headerlink" href="#pyop2.op2.Subset.layers_array" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.op2.DataSet">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">DataSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.DataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.DataSet</span></code></a></p>
<dl class="py attribute">
<dt id="pyop2.op2.DataSet.lgmap">
<code class="sig-name descname">lgmap</code><a class="headerlink" href="#pyop2.op2.DataSet.lgmap" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc LGMap mapping process-local indices to global
indices for this <a class="reference internal" href="#pyop2.op2.DataSet" title="pyop2.op2.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.DataSet.scalar_lgmap">
<code class="sig-name descname">scalar_lgmap</code><a class="headerlink" href="#pyop2.op2.DataSet.scalar_lgmap" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.DataSet.unblocked_lgmap">
<code class="sig-name descname">unblocked_lgmap</code><a class="headerlink" href="#pyop2.op2.DataSet.unblocked_lgmap" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc LGMap mapping process-local indices to global
indices for this <a class="reference internal" href="#pyop2.op2.DataSet" title="pyop2.op2.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a> with a block size of 1.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.DataSet.field_ises">
<code class="sig-name descname">field_ises</code><a class="headerlink" href="#pyop2.op2.DataSet.field_ises" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of PETSc ISes defining the global indices for each set in
the DataSet.</p>
<p>Used when extracting blocks from matrices for solvers.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.DataSet.local_ises">
<code class="sig-name descname">local_ises</code><a class="headerlink" href="#pyop2.op2.DataSet.local_ises" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of PETSc ISes defining the local indices for each set in the DataSet.</p>
<p>Used when extracting blocks from matrices for assembly.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.DataSet.layout_vec">
<code class="sig-name descname">layout_vec</code><a class="headerlink" href="#pyop2.op2.DataSet.layout_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc Vec compatible with the dof layout of this DataSet.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.DataSet.dm">
<code class="sig-name descname">dm</code><a class="headerlink" href="#pyop2.op2.DataSet.dm" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.op2.GlobalDataSet">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">GlobalDataSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.GlobalDataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.GlobalDataSet" title="pyop2.base.GlobalDataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.GlobalDataSet</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>global</strong> – The <a class="reference internal" href="#pyop2.op2.Global" title="pyop2.op2.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a> on which this object is based.</p>
</dd>
</dl>
<dl class="py attribute">
<dt id="pyop2.op2.GlobalDataSet.lgmap">
<code class="sig-name descname">lgmap</code><a class="headerlink" href="#pyop2.op2.GlobalDataSet.lgmap" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc LGMap mapping process-local indices to global
indices for this <a class="reference internal" href="#pyop2.op2.DataSet" title="pyop2.op2.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.GlobalDataSet.unblocked_lgmap">
<code class="sig-name descname">unblocked_lgmap</code><a class="headerlink" href="#pyop2.op2.GlobalDataSet.unblocked_lgmap" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc LGMap mapping process-local indices to global
indices for this <a class="reference internal" href="#pyop2.op2.DataSet" title="pyop2.op2.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a> with a block size of 1.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.GlobalDataSet.field_ises">
<code class="sig-name descname">field_ises</code><a class="headerlink" href="#pyop2.op2.GlobalDataSet.field_ises" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of PETSc ISes defining the global indices for each set in
the DataSet.</p>
<p>Used when extracting blocks from matrices for solvers.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.GlobalDataSet.local_ises">
<code class="sig-name descname">local_ises</code><a class="headerlink" href="#pyop2.op2.GlobalDataSet.local_ises" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of PETSc ISes defining the local indices for each set in the DataSet.</p>
<p>Used when extracting blocks from matrices for assembly.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.GlobalDataSet.layout_vec">
<code class="sig-name descname">layout_vec</code><a class="headerlink" href="#pyop2.op2.GlobalDataSet.layout_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc Vec compatible with the dof layout of this DataSet.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.GlobalDataSet.dm">
<code class="sig-name descname">dm</code><a class="headerlink" href="#pyop2.op2.GlobalDataSet.dm" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.op2.MixedDataSet">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">MixedDataSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.MixedDataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.petsc_base.DataSet" title="pyop2.petsc_base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.petsc_base.DataSet</span></code></a>, <a class="reference internal" href="#pyop2.base.MixedDataSet" title="pyop2.base.MixedDataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.MixedDataSet</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arg</strong> – a <a class="reference internal" href="#pyop2.op2.MixedSet" title="pyop2.op2.MixedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedSet</span></code></a> or an iterable or a generator
expression of <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>s or <a class="reference internal" href="#pyop2.op2.DataSet" title="pyop2.op2.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>s or a
mixture of both</p></li>
<li><p><strong>dims</strong> – <cite>None</cite> (the default) or an <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code> or an iterable or
generator expression of <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>s, which <strong>must</strong> be
of same length as <cite>arg</cite></p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When using generator expressions for <code class="docutils literal notranslate"><span class="pre">arg</span></code> or <code class="docutils literal notranslate"><span class="pre">dims</span></code>, these
<strong>must</strong> terminate or else will cause an infinite loop.</p>
</div>
<dl class="py attribute">
<dt id="pyop2.op2.MixedDataSet.layout_vec">
<code class="sig-name descname">layout_vec</code><a class="headerlink" href="#pyop2.op2.MixedDataSet.layout_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc Vec compatible with the dof layout of this MixedDataSet.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedDataSet.lgmap">
<code class="sig-name descname">lgmap</code><a class="headerlink" href="#pyop2.op2.MixedDataSet.lgmap" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc LGMap mapping process-local indices to global
indices for this <a class="reference internal" href="#pyop2.op2.MixedDataSet" title="pyop2.op2.MixedDataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDataSet</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedDataSet.unblocked_lgmap">
<code class="sig-name descname">unblocked_lgmap</code><a class="headerlink" href="#pyop2.op2.MixedDataSet.unblocked_lgmap" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc LGMap mapping process-local indices to global
indices for this <a class="reference internal" href="#pyop2.op2.DataSet" title="pyop2.op2.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a> with a block size of 1.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.op2.Halo">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">Halo</code><a class="headerlink" href="#pyop2.op2.Halo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A description of a halo associated with a <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>.</p>
<p>The halo object describes which <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> elements are sent
where, and which <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> elements are received from where.</p>
<dl class="py method">
<dt id="pyop2.op2.Halo.comm">
<em class="property">abstract property </em><code class="sig-name descname">comm</code><a class="headerlink" href="#pyop2.op2.Halo.comm" title="Permalink to this definition">¶</a></dt>
<dd><p>The MPI communicator for this halo.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.op2.Halo.local_to_global_numbering">
<em class="property">abstract property </em><code class="sig-name descname">local_to_global_numbering</code><a class="headerlink" href="#pyop2.op2.Halo.local_to_global_numbering" title="Permalink to this definition">¶</a></dt>
<dd><p>The mapping from process-local to process-global numbers for this halo.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.op2.Halo.global_to_local_begin">
<em class="property">abstract </em><code class="sig-name descname">global_to_local_begin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dat</span></em>, <em class="sig-param"><span class="n">insert_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Halo.global_to_local_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin an exchange from global (assembled) to local (ghosted) representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dat</strong> – The <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> to exchange.</p></li>
<li><p><strong>insert_mode</strong> – The insertion mode.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyop2.op2.Halo.global_to_local_end">
<em class="property">abstract </em><code class="sig-name descname">global_to_local_end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dat</span></em>, <em class="sig-param"><span class="n">insert_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Halo.global_to_local_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Finish an exchange from global (assembled) to local (ghosted) representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dat</strong> – The <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> to exchange.</p></li>
<li><p><strong>insert_mode</strong> – The insertion mode.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyop2.op2.Halo.local_to_global_begin">
<em class="property">abstract </em><code class="sig-name descname">local_to_global_begin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dat</span></em>, <em class="sig-param"><span class="n">insert_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Halo.local_to_global_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin an exchange from local (ghosted) to global (assembled) representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dat</strong> – The <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> to exchange.</p></li>
<li><p><strong>insert_mode</strong> – The insertion mode.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyop2.op2.Halo.local_to_global_end">
<em class="property">abstract </em><code class="sig-name descname">local_to_global_end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dat</span></em>, <em class="sig-param"><span class="n">insert_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Halo.local_to_global_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Finish an exchange from local (ghosted) to global (assembled) representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dat</strong> – The <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> to exchange.</p></li>
<li><p><strong>insert_mode</strong> – The insertion mode.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.op2.Dat">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">Dat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dtype</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Dat" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Dat</span></code></a>, <a class="reference internal" href="#pyop2.petsc_base.VecAccessMixin" title="pyop2.petsc_base.VecAccessMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.petsc_base.VecAccessMixin</span></code></a></p>
<dl class="py method">
<dt id="pyop2.op2.Dat.vec_context">
<code class="sig-name descname">vec_context</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">access</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Dat.vec_context" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager for a <code class="xref py py-class docutils literal notranslate"><span class="pre">PETSc.Vec</span></code> from a <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>access</strong> – Access descriptor: READ, WRITE, or RW.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.op2.MixedDat">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">MixedDat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mdset_or_dats</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.MixedDat" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.MixedDat" title="pyop2.base.MixedDat"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.MixedDat</span></code></a>, <a class="reference internal" href="#pyop2.petsc_base.VecAccessMixin" title="pyop2.petsc_base.VecAccessMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.petsc_base.VecAccessMixin</span></code></a></p>
<dl class="py method">
<dt id="pyop2.op2.MixedDat.vec_context">
<code class="sig-name descname">vec_context</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">access</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.MixedDat.vec_context" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager scattering the arrays of all components of this
<a class="reference internal" href="#pyop2.op2.MixedDat" title="pyop2.op2.MixedDat"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDat</span></code></a> into a contiguous <code class="xref py py-class docutils literal notranslate"><span class="pre">PETSc.Vec</span></code> and reverse
scattering to the original arrays when exiting the context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>access</strong> – Access descriptor: READ, WRITE, or RW.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Vec</span></code> obtained from this context is in
the correct order to be left multiplied by a compatible
<code class="xref py py-class docutils literal notranslate"><span class="pre">MixedMat</span></code>.  In parallel it is <em>not</em> just a
concatenation of the underlying <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>s.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.op2.Mat">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">Mat</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Mat" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Mat</span></code></a></p>
<p>OP2 matrix data. A Mat is defined on a sparsity pattern and holds a value
for each element in the <a class="reference internal" href="#pyop2.op2.Sparsity" title="pyop2.op2.Sparsity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sparsity</span></code></a>.</p>
<dl class="py attribute">
<dt id="pyop2.op2.Mat.local_to_global_maps">
<code class="sig-name descname">local_to_global_maps</code><em class="property"> = (None, None)</em><a class="headerlink" href="#pyop2.op2.Mat.local_to_global_maps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyop2.op2.Mat.zero">
<code class="sig-name descname">zero</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Mat.zero" title="Permalink to this definition">¶</a></dt>
<dd><p>Zero the matrix.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.op2.Mat.zero_rows">
<code class="sig-name descname">zero_rows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">diag_val</span><span class="o">=</span><span class="default_value">1.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Mat.zero_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Zeroes the specified rows of the matrix, with the exception of the
diagonal entry, which is set to diag_val. May be used for applying
strong boundary conditions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rows</strong> – a <a class="reference internal" href="#pyop2.op2.Subset" title="pyop2.op2.Subset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subset</span></code></a> or an iterable</p>
</dd>
</dl>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.op2.Mat.set_local_diagonal_entries">
<code class="sig-name descname">set_local_diagonal_entries</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">diag_val</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">idx</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Mat.set_local_diagonal_entries" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the diagonal entry in <code class="docutils literal notranslate"><span class="pre">rows</span></code> to a particular value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rows</strong> – a <a class="reference internal" href="#pyop2.op2.Subset" title="pyop2.op2.Subset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subset</span></code></a> or an iterable.</p></li>
<li><p><strong>diag_val</strong> – the value to add</p></li>
</ul>
</dd>
</dl>
<p>The indices in <code class="docutils literal notranslate"><span class="pre">rows</span></code> should index the process-local rows of
the matrix (no mapping to global indexes is applied).</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.op2.Mat.assemble">
<code class="sig-name descname">assemble</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Mat.assemble" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.op2.Mat.addto_values">
<code class="sig-name descname">addto_values</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">cols</span></em>, <em class="sig-param"><span class="n">values</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Mat.addto_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a block of values to the <a class="reference internal" href="#pyop2.op2.Mat" title="pyop2.op2.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.op2.Mat.set_values">
<code class="sig-name descname">set_values</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">cols</span></em>, <em class="sig-param"><span class="n">values</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Mat.set_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a block of values in the <a class="reference internal" href="#pyop2.op2.Mat" title="pyop2.op2.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Mat.blocks">
<code class="sig-name descname">blocks</code><a class="headerlink" href="#pyop2.op2.Mat.blocks" title="Permalink to this definition">¶</a></dt>
<dd><p>2-dimensional array of matrix blocks.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.op2.Mat.values">
<em class="property">property </em><code class="sig-name descname">values</code><a class="headerlink" href="#pyop2.op2.Mat.values" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy array of matrix values.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is a dense array, so will need a lot of memory.  It’s
probably not a good idea to access this property if your
matrix has more than around 10000 degrees of freedom.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.op2.Global">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">Global</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dim</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dtype</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Global" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Global</span></code></a>, <a class="reference internal" href="#pyop2.petsc_base.VecAccessMixin" title="pyop2.petsc_base.VecAccessMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.petsc_base.VecAccessMixin</span></code></a></p>
<dl class="py method">
<dt id="pyop2.op2.Global.vec_context">
<code class="sig-name descname">vec_context</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">access</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Global.vec_context" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager for a <code class="xref py py-class docutils literal notranslate"><span class="pre">PETSc.Vec</span></code> from a <a class="reference internal" href="#pyop2.op2.Global" title="pyop2.op2.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>access</strong> – Access descriptor: READ, WRITE, or RW.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.op2.Map">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">Map</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterset</span></em>, <em class="sig-param"><span class="n">toset</span></em>, <em class="sig-param"><span class="n">arity</span></em>, <em class="sig-param"><span class="n">values</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Map" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>OP2 map, a relation between two <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> objects.</p>
<p>Each entry in the <code class="docutils literal notranslate"><span class="pre">iterset</span></code> maps to <code class="docutils literal notranslate"><span class="pre">arity</span></code> entries in the
<code class="docutils literal notranslate"><span class="pre">toset</span></code>. When a map is used in a <a class="reference internal" href="#pyop2.op2.par_loop" title="pyop2.op2.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyop2.op2.par_loop()</span></code></a>, it is
possible to use Python index notation to select an individual entry on the
right hand side of this map. There are three possibilities:</p>
<ul class="simple">
<li><p>No index. All <code class="docutils literal notranslate"><span class="pre">arity</span></code> <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> entries will be passed to the
kernel.</p></li>
<li><p>An integer: <code class="docutils literal notranslate"><span class="pre">some_map[n]</span></code>. The <code class="docutils literal notranslate"><span class="pre">n</span></code> th entry of the
map result will be passed to the kernel.</p></li>
</ul>
<dl class="py attribute">
<dt id="pyop2.op2.Map.dtype">
<code class="sig-name descname">dtype</code><em class="property"> = dtype('int32')</em><a class="headerlink" href="#pyop2.op2.Map.dtype" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Map.split">
<code class="sig-name descname">split</code><a class="headerlink" href="#pyop2.op2.Map.split" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Map.iterset">
<code class="sig-name descname">iterset</code><a class="headerlink" href="#pyop2.op2.Map.iterset" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> mapped from.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Map.toset">
<code class="sig-name descname">toset</code><a class="headerlink" href="#pyop2.op2.Map.toset" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> mapped to.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Map.arity">
<code class="sig-name descname">arity</code><a class="headerlink" href="#pyop2.op2.Map.arity" title="Permalink to this definition">¶</a></dt>
<dd><p>Arity of the mapping: number of toset elements mapped to per
iterset element.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Map.arities">
<code class="sig-name descname">arities</code><a class="headerlink" href="#pyop2.op2.Map.arities" title="Permalink to this definition">¶</a></dt>
<dd><p>Arity of the mapping: number of toset elements mapped to per
iterset element.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Map.arange">
<code class="sig-name descname">arange</code><a class="headerlink" href="#pyop2.op2.Map.arange" title="Permalink to this definition">¶</a></dt>
<dd><p>Tuple of arity offsets for each constituent <a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Map.values">
<code class="sig-name descname">values</code><a class="headerlink" href="#pyop2.op2.Map.values" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping array.</p>
<p>This only returns the map values for local points, to see the
halo points too, use <a class="reference internal" href="#pyop2.op2.Map.values_with_halo" title="pyop2.op2.Map.values_with_halo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">values_with_halo()</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Map.values_with_halo">
<code class="sig-name descname">values_with_halo</code><a class="headerlink" href="#pyop2.op2.Map.values_with_halo" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping array.</p>
<p>This returns all map values (including halo points), see
<a class="reference internal" href="#pyop2.op2.Map.values" title="pyop2.op2.Map.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">values()</span></code></a> if you only need to look at the local
points.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Map.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.op2.Map.name" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined label</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Map.offset">
<code class="sig-name descname">offset</code><a class="headerlink" href="#pyop2.op2.Map.offset" title="Permalink to this definition">¶</a></dt>
<dd><p>The vertical offset.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.op2.MixedMap">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">MixedMap</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.MixedMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Map</span></code></a>, <a class="reference internal" href="#pyop2.caching.ObjectCached" title="pyop2.caching.ObjectCached"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.caching.ObjectCached</span></code></a></p>
<p>A container for a bag of <a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>s.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>maps</strong> (<em>iterable</em>) – Iterable of <a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>s</p>
</dd>
</dl>
<dl class="py attribute">
<dt id="pyop2.op2.MixedMap.split">
<code class="sig-name descname">split</code><a class="headerlink" href="#pyop2.op2.MixedMap.split" title="Permalink to this definition">¶</a></dt>
<dd><p>The underlying tuple of <a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>s.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedMap.iterset">
<code class="sig-name descname">iterset</code><a class="headerlink" href="#pyop2.op2.MixedMap.iterset" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.op2.MixedSet" title="pyop2.op2.MixedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedSet</span></code></a> mapped from.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedMap.toset">
<code class="sig-name descname">toset</code><a class="headerlink" href="#pyop2.op2.MixedMap.toset" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.op2.MixedSet" title="pyop2.op2.MixedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedSet</span></code></a> mapped to.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedMap.arity">
<code class="sig-name descname">arity</code><a class="headerlink" href="#pyop2.op2.MixedMap.arity" title="Permalink to this definition">¶</a></dt>
<dd><p>Arity of the mapping: total number of toset elements mapped to per
iterset element.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedMap.arities">
<code class="sig-name descname">arities</code><a class="headerlink" href="#pyop2.op2.MixedMap.arities" title="Permalink to this definition">¶</a></dt>
<dd><p>Arity of the mapping: number of toset elements mapped to per
iterset element.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedMap.arange">
<code class="sig-name descname">arange</code><a class="headerlink" href="#pyop2.op2.MixedMap.arange" title="Permalink to this definition">¶</a></dt>
<dd><p>Tuple of arity offsets for each constituent <a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedMap.values">
<code class="sig-name descname">values</code><a class="headerlink" href="#pyop2.op2.MixedMap.values" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping arrays excluding data for halos.</p>
<p>This only returns the map values for local points, to see the
halo points too, use <a class="reference internal" href="#pyop2.op2.MixedMap.values_with_halo" title="pyop2.op2.MixedMap.values_with_halo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">values_with_halo()</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedMap.values_with_halo">
<code class="sig-name descname">values_with_halo</code><a class="headerlink" href="#pyop2.op2.MixedMap.values_with_halo" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping arrays including data for halos.</p>
<p>This returns all map values (including halo points), see
<a class="reference internal" href="#pyop2.op2.MixedMap.values" title="pyop2.op2.MixedMap.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">values()</span></code></a> if you only need to look at the local
points.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedMap.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.op2.MixedMap.name" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined labels</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.MixedMap.offset">
<code class="sig-name descname">offset</code><a class="headerlink" href="#pyop2.op2.MixedMap.offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Vertical offsets.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.op2.Sparsity">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">Sparsity</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.Sparsity" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.caching.ObjectCached" title="pyop2.caching.ObjectCached"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.caching.ObjectCached</span></code></a></p>
<p>OP2 Sparsity, the non-zero structure a matrix derived from the union of
the outer product of pairs of <a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> objects.</p>
<p>Examples of constructing a Sparsity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Sparsity</span><span class="p">(</span><span class="n">single_dset</span><span class="p">,</span> <span class="n">single_map</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">)</span>
<span class="n">Sparsity</span><span class="p">((</span><span class="n">row_dset</span><span class="p">,</span> <span class="n">col_dset</span><span class="p">),</span> <span class="p">(</span><span class="n">single_rowmap</span><span class="p">,</span> <span class="n">single_colmap</span><span class="p">))</span>
<span class="n">Sparsity</span><span class="p">((</span><span class="n">row_dset</span><span class="p">,</span> <span class="n">col_dset</span><span class="p">),</span>
         <span class="p">[(</span><span class="n">first_rowmap</span><span class="p">,</span> <span class="n">first_colmap</span><span class="p">),</span> <span class="p">(</span><span class="n">second_rowmap</span><span class="p">,</span> <span class="n">second_colmap</span><span class="p">)])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dsets</strong> – <a class="reference internal" href="#pyop2.op2.DataSet" title="pyop2.op2.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>s for the left and right function
spaces this <a class="reference internal" href="#pyop2.op2.Sparsity" title="pyop2.op2.Sparsity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sparsity</span></code></a> maps between</p></li>
<li><p><strong>maps</strong> (a pair of <a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>s specifying a row map and a column
map, or an iterable of pairs of <a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>s specifying multiple
row and column maps - if a single <a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> is passed, it is
used as both a row map and a column map) – <a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>s to build the <a class="reference internal" href="#pyop2.op2.Sparsity" title="pyop2.op2.Sparsity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sparsity</span></code></a> from</p></li>
<li><p><strong>iteration_regions</strong> – regions that select subsets of extruded maps to iterate over.</p></li>
<li><p><strong>name</strong> (<em>string</em>) – user-defined label (optional)</p></li>
<li><p><strong>nest</strong> – Should the sparsity over mixed set be built as nested blocks?</p></li>
<li><p><strong>block_sparse</strong> – Should the sparsity for datasets with
cdim &gt; 1 be built as a block sparsity?</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="pyop2.op2.Sparsity.dsets">
<code class="sig-name descname">dsets</code><a class="headerlink" href="#pyop2.op2.Sparsity.dsets" title="Permalink to this definition">¶</a></dt>
<dd><p>A pair of <a class="reference internal" href="#pyop2.op2.DataSet" title="pyop2.op2.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>s for the left and right function
spaces this <a class="reference internal" href="#pyop2.op2.Sparsity" title="pyop2.op2.Sparsity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sparsity</span></code></a> maps between.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Sparsity.maps">
<code class="sig-name descname">maps</code><a class="headerlink" href="#pyop2.op2.Sparsity.maps" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of pairs (rmap, cmap) where each pair of
<a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> objects will later be used to assemble into this
matrix. The iterset of each of the maps in a pair must be the
same, while the toset of all the maps which appear first
must be common, this will form the row <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> of the
sparsity. Similarly, the toset of all the maps which appear
second must be common and will form the column <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> of
the <code class="docutils literal notranslate"><span class="pre">Sparsity</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Sparsity.cmaps">
<code class="sig-name descname">cmaps</code><a class="headerlink" href="#pyop2.op2.Sparsity.cmaps" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of column maps this sparsity is assembled from.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Sparsity.rmaps">
<code class="sig-name descname">rmaps</code><a class="headerlink" href="#pyop2.op2.Sparsity.rmaps" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of row maps this sparsity is assembled from.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Sparsity.dims">
<code class="sig-name descname">dims</code><a class="headerlink" href="#pyop2.op2.Sparsity.dims" title="Permalink to this definition">¶</a></dt>
<dd><p>A tuple of tuples where the <code class="docutils literal notranslate"><span class="pre">i,j``th</span> <span class="pre">entry</span>
<span class="pre">is</span> <span class="pre">a</span> <span class="pre">pair</span> <span class="pre">giving</span> <span class="pre">the</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">rows</span> <span class="pre">per</span> <span class="pre">entry</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">row</span>
<span class="pre">:class:`Set`</span> <span class="pre">and</span> <span class="pre">the</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">columns</span> <span class="pre">per</span> <span class="pre">entry</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">column</span>
<span class="pre">:class:`Set`</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">``Sparsity</span></code>.  The extents of the first
two indices are given by the <a class="reference internal" href="#pyop2.op2.Sparsity.shape" title="pyop2.op2.Sparsity.shape"><code class="xref py py-attr docutils literal notranslate"><span class="pre">shape</span></code></a> of the sparsity.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Sparsity.shape">
<code class="sig-name descname">shape</code><a class="headerlink" href="#pyop2.op2.Sparsity.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of block rows and columns.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Sparsity.nrows">
<code class="sig-name descname">nrows</code><a class="headerlink" href="#pyop2.op2.Sparsity.nrows" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of rows in the <code class="docutils literal notranslate"><span class="pre">Sparsity</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Sparsity.ncols">
<code class="sig-name descname">ncols</code><a class="headerlink" href="#pyop2.op2.Sparsity.ncols" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of columns in the <code class="docutils literal notranslate"><span class="pre">Sparsity</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Sparsity.nested">
<code class="sig-name descname">nested</code><a class="headerlink" href="#pyop2.op2.Sparsity.nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether a sparsity is monolithic (even if it has a block structure).</p>
<p>To elaborate, if a sparsity maps between
<a class="reference internal" href="#pyop2.op2.MixedDataSet" title="pyop2.op2.MixedDataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDataSet</span></code></a>s, it can either be nested, in which
case it consists of as many blocks are the product of the
length of the datasets it maps between, or monolithic.  In the
latter case the sparsity is for the full map between the mixed
datasets, rather than between the blocks of the non-mixed
datasets underneath them.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Sparsity.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#pyop2.op2.Sparsity.name" title="Permalink to this definition">¶</a></dt>
<dd><p>A user-defined label.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Sparsity.nnz">
<code class="sig-name descname">nnz</code><a class="headerlink" href="#pyop2.op2.Sparsity.nnz" title="Permalink to this definition">¶</a></dt>
<dd><p>Array containing the number of non-zeroes in the various rows of the
diagonal portion of the local submatrix.</p>
<p>This is the same as the parameter <cite>d_nnz</cite> used for preallocation in
PETSc’s <a class="reference external" href="http://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/Mat/MatMPIAIJSetPreallocation.html">MatMPIAIJSetPreallocation</a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Sparsity.onnz">
<code class="sig-name descname">onnz</code><a class="headerlink" href="#pyop2.op2.Sparsity.onnz" title="Permalink to this definition">¶</a></dt>
<dd><p>Array containing the number of non-zeroes in the various rows of the
off-diagonal portion of the local submatrix.</p>
<p>This is the same as the parameter <cite>o_nnz</cite> used for preallocation in
PETSc’s <a class="reference external" href="http://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/Mat/MatMPIAIJSetPreallocation.html">MatMPIAIJSetPreallocation</a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Sparsity.nz">
<code class="sig-name descname">nz</code><a class="headerlink" href="#pyop2.op2.Sparsity.nz" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.Sparsity.onz">
<code class="sig-name descname">onz</code><a class="headerlink" href="#pyop2.op2.Sparsity.onz" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="pyop2.op2.par_loop">
<code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">par_loop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kernel</span></em>, <em class="sig-param"><span class="n">iterset</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.par_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Invocation of an OP2 kernel</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kernel</strong> – The <a class="reference internal" href="#pyop2.op2.Kernel" title="pyop2.op2.Kernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Kernel</span></code></a> to be executed.</p></li>
<li><p><strong>iterset</strong> – The iteration <a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> over which the kernel should be
executed.</p></li>
<li><p><strong>*args</strong> – One or more <code class="xref py py-class docutils literal notranslate"><span class="pre">base.Arg</span></code>s constructed from a
<a class="reference internal" href="#pyop2.op2.Global" title="pyop2.op2.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a>, <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> or <a class="reference internal" href="#pyop2.op2.Mat" title="pyop2.op2.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a> using the call
syntax and passing in an optionally indexed <a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>
through which this <code class="xref py py-class docutils literal notranslate"><span class="pre">base.Arg</span></code> is accessed and the
<code class="xref py py-class docutils literal notranslate"><span class="pre">base.Access</span></code> descriptor indicating how the
<a class="reference internal" href="#pyop2.op2.Kernel" title="pyop2.op2.Kernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Kernel</span></code></a> is going to access this data (see the example
below). These are the global data structures from and to
which the kernel will read and write.</p></li>
<li><p><strong>iterate</strong> – <p>Optionally specify which region of an
<a class="reference internal" href="#pyop2.op2.ExtrudedSet" title="pyop2.op2.ExtrudedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtrudedSet</span></code></a> to iterate over.
Valid values are:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ON_BOTTOM</span></code>: iterate over the bottom layer of cells.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ON_TOP</span></code> iterate over the top layer of cells.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ALL</span></code> iterate over all cells (the default if unspecified)</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ON_INTERIOR_FACETS</span></code> iterate over all the layers</dt><dd><p>except the top layer, accessing data two adjacent (in
the extruded direction) cells at a time.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>pass_layer_arg</strong> – Should the wrapper pass the current layer
into the kernel (as an <code class="docutils literal notranslate"><span class="pre">int</span></code>). Only makes sense for
indirect extruded iteration.</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is the caller’s responsibility that the number and type of all
<code class="xref py py-class docutils literal notranslate"><span class="pre">base.Arg</span></code>s passed to the <a class="reference internal" href="#pyop2.op2.par_loop" title="pyop2.op2.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">par_loop()</span></code></a> match those expected
by the <a class="reference internal" href="#pyop2.op2.Kernel" title="pyop2.op2.Kernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Kernel</span></code></a>. No runtime check is performed to ensure this!</p>
</div>
<p><a class="reference internal" href="#pyop2.op2.par_loop" title="pyop2.op2.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">par_loop()</span></code></a> invocation is illustrated by the following example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pyop2</span><span class="o">.</span><span class="n">par_loop</span><span class="p">(</span><span class="n">mass</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span>
               <span class="n">mat</span><span class="p">(</span><span class="n">pyop2</span><span class="o">.</span><span class="n">INC</span><span class="p">,</span> <span class="p">(</span><span class="n">elem_node</span><span class="p">[</span><span class="n">pyop2</span><span class="o">.</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]]),</span> <span class="n">elem_node</span><span class="p">[</span><span class="n">pyop2</span><span class="o">.</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span>
               <span class="n">coords</span><span class="p">(</span><span class="n">pyop2</span><span class="o">.</span><span class="n">READ</span><span class="p">,</span> <span class="n">elem_node</span><span class="p">))</span>
</pre></div>
</div>
<p>This example will execute the <a class="reference internal" href="#pyop2.op2.Kernel" title="pyop2.op2.Kernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Kernel</span></code></a> <code class="docutils literal notranslate"><span class="pre">mass</span></code> over the
<a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> <code class="docutils literal notranslate"><span class="pre">elements</span></code> executing 3x3 times for each
<a class="reference internal" href="#pyop2.op2.Set" title="pyop2.op2.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> member, assuming the <a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> <code class="docutils literal notranslate"><span class="pre">elem_node</span></code> is of arity 3.
The <a class="reference internal" href="#pyop2.op2.Kernel" title="pyop2.op2.Kernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Kernel</span></code></a> takes four arguments, the first is a <a class="reference internal" href="#pyop2.op2.Mat" title="pyop2.op2.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a> named
<code class="docutils literal notranslate"><span class="pre">mat</span></code>, the second is a field named <code class="docutils literal notranslate"><span class="pre">coords</span></code>. The remaining two arguments
indicate which local iteration space point the kernel is to execute.</p>
<p>A <a class="reference internal" href="#pyop2.op2.Mat" title="pyop2.op2.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a> requires a pair of <a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> objects, one each
for the row and column spaces. In this case both are the same
<code class="docutils literal notranslate"><span class="pre">elem_node</span></code> map. The row <a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> is indexed by the first
index in the local iteration space, indicated by the <code class="docutils literal notranslate"><span class="pre">0</span></code> index
to <code class="xref py py-data docutils literal notranslate"><span class="pre">pyop2.i</span></code>, while the column space is indexed by
the second local index.  The matrix is accessed to increment
values using the <code class="docutils literal notranslate"><span class="pre">pyop2.INC</span></code> access descriptor.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">coords</span></code> <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> is also accessed via the <code class="docutils literal notranslate"><span class="pre">elem_node</span></code>
<a class="reference internal" href="#pyop2.op2.Map" title="pyop2.op2.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>, however no indices are passed so all entries of
<code class="docutils literal notranslate"><span class="pre">elem_node</span></code> for the relevant member of <code class="docutils literal notranslate"><span class="pre">elements</span></code> will be
passed to the kernel as a vector.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.op2.ParLoop">
<code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">ParLoop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kernel</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.ParLoop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="pyop2.op2.DatView">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.op2.</code><code class="sig-name descname">DatView</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dat</span></em>, <em class="sig-param"><span class="n">index</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.op2.DatView" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Dat</span></code></a></p>
<p>An indexed view into a <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>.</p>
<p>This object can be used like a <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> but the kernel will
only see the requested index, rather than the full data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dat</strong> – The <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> to create a view into.</p></li>
<li><p><strong>index</strong> – The component to select a view of.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="pyop2.op2.DatView.cdim">
<code class="sig-name descname">cdim</code><a class="headerlink" href="#pyop2.op2.DatView.cdim" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.DatView.dim">
<code class="sig-name descname">dim</code><a class="headerlink" href="#pyop2.op2.DatView.dim" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.op2.DatView.shape">
<code class="sig-name descname">shape</code><a class="headerlink" href="#pyop2.op2.DatView.shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyop2.op2.DatView.data">
<em class="property">property </em><code class="sig-name descname">data</code><a class="headerlink" href="#pyop2.op2.DatView.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Numpy array containing the data values.</p>
<p>With this accessor you are claiming that you will modify
the values you get back.  If you only need to look at the
values, use <a class="reference internal" href="#pyop2.op2.DatView.data_ro" title="pyop2.op2.DatView.data_ro"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_ro()</span></code></a> instead.</p>
<p>This only shows local values, to see the halo values too use
<a class="reference internal" href="#pyop2.op2.DatView.data_with_halos" title="pyop2.op2.DatView.data_with_halos"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_with_halos()</span></code></a>.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.op2.DatView.data_ro">
<em class="property">property </em><code class="sig-name descname">data_ro</code><a class="headerlink" href="#pyop2.op2.DatView.data_ro" title="Permalink to this definition">¶</a></dt>
<dd><p>Numpy array containing the data values.  Read-only.</p>
<p>With this accessor you are not allowed to modify the values
you get back.  If you need to do so, use <a class="reference internal" href="#pyop2.op2.DatView.data" title="pyop2.op2.DatView.data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data()</span></code></a> instead.</p>
<p>This only shows local values, to see the halo values too use
<a class="reference internal" href="#pyop2.op2.DatView.data_ro_with_halos" title="pyop2.op2.DatView.data_ro_with_halos"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_ro_with_halos()</span></code></a>.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.op2.DatView.data_with_halos">
<em class="property">property </em><code class="sig-name descname">data_with_halos</code><a class="headerlink" href="#pyop2.op2.DatView.data_with_halos" title="Permalink to this definition">¶</a></dt>
<dd><p>A view of this <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>s data.</p>
<p>This accessor marks the <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> as dirty, see
<a class="reference internal" href="#pyop2.op2.DatView.data" title="pyop2.op2.DatView.data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data()</span></code></a> for more details on the semantics.</p>
<p>With this accessor, you get to see up to date halo values, but
you should not try and modify them, because they will be
overwritten by the next halo exchange.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.op2.DatView.data_ro_with_halos">
<em class="property">property </em><code class="sig-name descname">data_ro_with_halos</code><a class="headerlink" href="#pyop2.op2.DatView.data_ro_with_halos" title="Permalink to this definition">¶</a></dt>
<dd><p>A view of this <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>s data.</p>
<p>This accessor does not mark the <a class="reference internal" href="#pyop2.op2.Dat" title="pyop2.op2.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a> as dirty, and is
a read only view, see <a class="reference internal" href="#pyop2.op2.DatView.data_ro" title="pyop2.op2.DatView.data_ro"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_ro()</span></code></a> for more details on the
semantics.</p>
<p>With this accessor, you get to see up to date halo values, but
you should not try and modify them, because they will be
overwritten by the next halo exchange.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pyop2.petsc_base">
<span id="pyop2-petsc-base-module"></span><h2>pyop2.petsc_base module<a class="headerlink" href="#module-pyop2.petsc_base" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="pyop2.petsc_base.timed_region">
<code class="sig-prename descclassname">pyop2.petsc_base.</code><code class="sig-name descname">timed_region</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.timed_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Log.Event(type cls, name, klass=None)</p>
</dd></dl>

<dl class="py class">
<dt id="pyop2.petsc_base.DataSet">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.petsc_base.</code><code class="sig-name descname">DataSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.DataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.DataSet" title="pyop2.base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.DataSet</span></code></a></p>
<dl class="py attribute">
<dt id="pyop2.petsc_base.DataSet.lgmap">
<code class="sig-name descname">lgmap</code><a class="headerlink" href="#pyop2.petsc_base.DataSet.lgmap" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc LGMap mapping process-local indices to global
indices for this <a class="reference internal" href="#pyop2.petsc_base.DataSet" title="pyop2.petsc_base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.petsc_base.DataSet.scalar_lgmap">
<code class="sig-name descname">scalar_lgmap</code><a class="headerlink" href="#pyop2.petsc_base.DataSet.scalar_lgmap" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pyop2.petsc_base.DataSet.unblocked_lgmap">
<code class="sig-name descname">unblocked_lgmap</code><a class="headerlink" href="#pyop2.petsc_base.DataSet.unblocked_lgmap" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc LGMap mapping process-local indices to global
indices for this <a class="reference internal" href="#pyop2.petsc_base.DataSet" title="pyop2.petsc_base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a> with a block size of 1.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.petsc_base.DataSet.field_ises">
<code class="sig-name descname">field_ises</code><a class="headerlink" href="#pyop2.petsc_base.DataSet.field_ises" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of PETSc ISes defining the global indices for each set in
the DataSet.</p>
<p>Used when extracting blocks from matrices for solvers.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.petsc_base.DataSet.local_ises">
<code class="sig-name descname">local_ises</code><a class="headerlink" href="#pyop2.petsc_base.DataSet.local_ises" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of PETSc ISes defining the local indices for each set in the DataSet.</p>
<p>Used when extracting blocks from matrices for assembly.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.petsc_base.DataSet.layout_vec">
<code class="sig-name descname">layout_vec</code><a class="headerlink" href="#pyop2.petsc_base.DataSet.layout_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc Vec compatible with the dof layout of this DataSet.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.petsc_base.DataSet.dm">
<code class="sig-name descname">dm</code><a class="headerlink" href="#pyop2.petsc_base.DataSet.dm" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.petsc_base.GlobalDataSet">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.petsc_base.</code><code class="sig-name descname">GlobalDataSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.GlobalDataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.GlobalDataSet" title="pyop2.base.GlobalDataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.GlobalDataSet</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>global</strong> – The <a class="reference internal" href="#pyop2.petsc_base.Global" title="pyop2.petsc_base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a> on which this object is based.</p>
</dd>
</dl>
<dl class="py attribute">
<dt id="pyop2.petsc_base.GlobalDataSet.lgmap">
<code class="sig-name descname">lgmap</code><a class="headerlink" href="#pyop2.petsc_base.GlobalDataSet.lgmap" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc LGMap mapping process-local indices to global
indices for this <a class="reference internal" href="#pyop2.petsc_base.DataSet" title="pyop2.petsc_base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.petsc_base.GlobalDataSet.unblocked_lgmap">
<code class="sig-name descname">unblocked_lgmap</code><a class="headerlink" href="#pyop2.petsc_base.GlobalDataSet.unblocked_lgmap" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc LGMap mapping process-local indices to global
indices for this <a class="reference internal" href="#pyop2.petsc_base.DataSet" title="pyop2.petsc_base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a> with a block size of 1.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.petsc_base.GlobalDataSet.field_ises">
<code class="sig-name descname">field_ises</code><a class="headerlink" href="#pyop2.petsc_base.GlobalDataSet.field_ises" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of PETSc ISes defining the global indices for each set in
the DataSet.</p>
<p>Used when extracting blocks from matrices for solvers.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.petsc_base.GlobalDataSet.local_ises">
<code class="sig-name descname">local_ises</code><a class="headerlink" href="#pyop2.petsc_base.GlobalDataSet.local_ises" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of PETSc ISes defining the local indices for each set in the DataSet.</p>
<p>Used when extracting blocks from matrices for assembly.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.petsc_base.GlobalDataSet.layout_vec">
<code class="sig-name descname">layout_vec</code><a class="headerlink" href="#pyop2.petsc_base.GlobalDataSet.layout_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc Vec compatible with the dof layout of this DataSet.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.petsc_base.GlobalDataSet.dm">
<code class="sig-name descname">dm</code><a class="headerlink" href="#pyop2.petsc_base.GlobalDataSet.dm" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.petsc_base.MixedDataSet">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.petsc_base.</code><code class="sig-name descname">MixedDataSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.MixedDataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.petsc_base.DataSet" title="pyop2.petsc_base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.petsc_base.DataSet</span></code></a>, <a class="reference internal" href="#pyop2.base.MixedDataSet" title="pyop2.base.MixedDataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.MixedDataSet</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arg</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">MixedSet</span></code> or an iterable or a generator
expression of <code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>s or <a class="reference internal" href="#pyop2.petsc_base.DataSet" title="pyop2.petsc_base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>s or a
mixture of both</p></li>
<li><p><strong>dims</strong> – <cite>None</cite> (the default) or an <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code> or an iterable or
generator expression of <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>s, which <strong>must</strong> be
of same length as <cite>arg</cite></p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When using generator expressions for <code class="docutils literal notranslate"><span class="pre">arg</span></code> or <code class="docutils literal notranslate"><span class="pre">dims</span></code>, these
<strong>must</strong> terminate or else will cause an infinite loop.</p>
</div>
<dl class="py attribute">
<dt id="pyop2.petsc_base.MixedDataSet.layout_vec">
<code class="sig-name descname">layout_vec</code><a class="headerlink" href="#pyop2.petsc_base.MixedDataSet.layout_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc Vec compatible with the dof layout of this MixedDataSet.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.petsc_base.MixedDataSet.lgmap">
<code class="sig-name descname">lgmap</code><a class="headerlink" href="#pyop2.petsc_base.MixedDataSet.lgmap" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc LGMap mapping process-local indices to global
indices for this <a class="reference internal" href="#pyop2.petsc_base.MixedDataSet" title="pyop2.petsc_base.MixedDataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDataSet</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.petsc_base.MixedDataSet.unblocked_lgmap">
<code class="sig-name descname">unblocked_lgmap</code><a class="headerlink" href="#pyop2.petsc_base.MixedDataSet.unblocked_lgmap" title="Permalink to this definition">¶</a></dt>
<dd><p>A PETSc LGMap mapping process-local indices to global
indices for this <a class="reference internal" href="#pyop2.petsc_base.DataSet" title="pyop2.petsc_base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a> with a block size of 1.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.petsc_base.VecAccessMixin">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.petsc_base.</code><code class="sig-name descname">VecAccessMixin</code><a class="headerlink" href="#pyop2.petsc_base.VecAccessMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="pyop2.petsc_base.VecAccessMixin.vec_context">
<em class="property">abstract </em><code class="sig-name descname">vec_context</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">access</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.VecAccessMixin.vec_context" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.VecAccessMixin.vec">
<em class="property">property </em><code class="sig-name descname">vec</code><a class="headerlink" href="#pyop2.petsc_base.VecAccessMixin.vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager for a PETSc Vec appropriate for this Dat.</p>
<p>You’re allowed to modify the data you get back from this view.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.VecAccessMixin.vec_wo">
<em class="property">property </em><code class="sig-name descname">vec_wo</code><a class="headerlink" href="#pyop2.petsc_base.VecAccessMixin.vec_wo" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager for a PETSc Vec appropriate for this Dat.</p>
<p>You’re allowed to modify the data you get back from this view,
but you cannot read from it.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.VecAccessMixin.vec_ro">
<em class="property">property </em><code class="sig-name descname">vec_ro</code><a class="headerlink" href="#pyop2.petsc_base.VecAccessMixin.vec_ro" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager for a PETSc Vec appropriate for this Dat.</p>
<p>You’re not allowed to modify the data you get back from this view.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.petsc_base.Dat">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.petsc_base.</code><code class="sig-name descname">Dat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dtype</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.Dat" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Dat</span></code></a>, <a class="reference internal" href="#pyop2.petsc_base.VecAccessMixin" title="pyop2.petsc_base.VecAccessMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.petsc_base.VecAccessMixin</span></code></a></p>
<dl class="py method">
<dt id="pyop2.petsc_base.Dat.vec_context">
<code class="sig-name descname">vec_context</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">access</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.Dat.vec_context" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager for a <code class="xref py py-class docutils literal notranslate"><span class="pre">PETSc.Vec</span></code> from a <a class="reference internal" href="#pyop2.petsc_base.Dat" title="pyop2.petsc_base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>access</strong> – Access descriptor: READ, WRITE, or RW.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.petsc_base.MixedDat">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.petsc_base.</code><code class="sig-name descname">MixedDat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mdset_or_dats</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.MixedDat" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.MixedDat" title="pyop2.base.MixedDat"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.MixedDat</span></code></a>, <a class="reference internal" href="#pyop2.petsc_base.VecAccessMixin" title="pyop2.petsc_base.VecAccessMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.petsc_base.VecAccessMixin</span></code></a></p>
<dl class="py method">
<dt id="pyop2.petsc_base.MixedDat.vec_context">
<code class="sig-name descname">vec_context</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">access</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.MixedDat.vec_context" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager scattering the arrays of all components of this
<a class="reference internal" href="#pyop2.petsc_base.MixedDat" title="pyop2.petsc_base.MixedDat"><code class="xref py py-class docutils literal notranslate"><span class="pre">MixedDat</span></code></a> into a contiguous <code class="xref py py-class docutils literal notranslate"><span class="pre">PETSc.Vec</span></code> and reverse
scattering to the original arrays when exiting the context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>access</strong> – Access descriptor: READ, WRITE, or RW.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Vec</span></code> obtained from this context is in
the correct order to be left multiplied by a compatible
<code class="xref py py-class docutils literal notranslate"><span class="pre">MixedMat</span></code>.  In parallel it is <em>not</em> just a
concatenation of the underlying <a class="reference internal" href="#pyop2.petsc_base.Dat" title="pyop2.petsc_base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>s.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.petsc_base.Global">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.petsc_base.</code><code class="sig-name descname">Global</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dim</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dtype</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">comm</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.Global" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Global" title="pyop2.base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Global</span></code></a>, <a class="reference internal" href="#pyop2.petsc_base.VecAccessMixin" title="pyop2.petsc_base.VecAccessMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.petsc_base.VecAccessMixin</span></code></a></p>
<dl class="py method">
<dt id="pyop2.petsc_base.Global.vec_context">
<code class="sig-name descname">vec_context</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">access</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.Global.vec_context" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager for a <code class="xref py py-class docutils literal notranslate"><span class="pre">PETSc.Vec</span></code> from a <a class="reference internal" href="#pyop2.petsc_base.Global" title="pyop2.petsc_base.Global"><code class="xref py py-class docutils literal notranslate"><span class="pre">Global</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>access</strong> – Access descriptor: READ, WRITE, or RW.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.petsc_base.SparsityBlock">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.petsc_base.</code><code class="sig-name descname">SparsityBlock</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.SparsityBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Sparsity" title="pyop2.base.Sparsity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Sparsity</span></code></a></p>
<p>A proxy class for a block in a monolithic <a class="reference internal" href="#pyop2.base.Sparsity" title="pyop2.base.Sparsity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sparsity</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parent</strong> – The parent monolithic sparsity.</p></li>
<li><p><strong>i</strong> – The block row.</p></li>
<li><p><strong>j</strong> – The block column.</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This class only implements the properties necessary to infer
its shape.  It does not provide arrays of non zero fill.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dsets</strong> – <a class="reference internal" href="#pyop2.petsc_base.DataSet" title="pyop2.petsc_base.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a>s for the left and right function
spaces this <code class="xref py py-class docutils literal notranslate"><span class="pre">Sparsity</span></code> maps between</p></li>
<li><p><strong>maps</strong> (a pair of <code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code>s specifying a row map and a column
map, or an iterable of pairs of <code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code>s specifying multiple
row and column maps - if a single <code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code> is passed, it is
used as both a row map and a column map) – <code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code>s to build the <code class="xref py py-class docutils literal notranslate"><span class="pre">Sparsity</span></code> from</p></li>
<li><p><strong>iteration_regions</strong> – regions that select subsets of extruded maps to iterate over.</p></li>
<li><p><strong>name</strong> (<em>string</em>) – user-defined label (optional)</p></li>
<li><p><strong>nest</strong> – Should the sparsity over mixed set be built as nested blocks?</p></li>
<li><p><strong>block_sparse</strong> – Should the sparsity for datasets with
cdim &gt; 1 be built as a block sparsity?</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pyop2.petsc_base.masked_lgmap">
<code class="sig-prename descclassname">pyop2.petsc_base.</code><code class="sig-name descname">masked_lgmap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lgmap</span></em>, <em class="sig-param"><span class="n">mask</span></em>, <em class="sig-param"><span class="n">block</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.masked_lgmap" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="pyop2.petsc_base.MatBlock">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.petsc_base.</code><code class="sig-name descname">MatBlock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">parent</span></em>, <em class="sig-param"><span class="n">i</span></em>, <em class="sig-param"><span class="n">j</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.MatBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Mat</span></code></a></p>
<p>A proxy class for a local block in a monolithic <a class="reference internal" href="#pyop2.petsc_base.Mat" title="pyop2.petsc_base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parent</strong> – The parent monolithic matrix.</p></li>
<li><p><strong>i</strong> – The block row.</p></li>
<li><p><strong>j</strong> – The block column.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="pyop2.petsc_base.MatBlock.assembly_state">
<em class="property">property </em><code class="sig-name descname">assembly_state</code><a class="headerlink" href="#pyop2.petsc_base.MatBlock.assembly_state" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.MatBlock.set_local_diagonal_entries">
<code class="sig-name descname">set_local_diagonal_entries</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">diag_val</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">idx</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.MatBlock.set_local_diagonal_entries" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.MatBlock.addto_values">
<code class="sig-name descname">addto_values</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">cols</span></em>, <em class="sig-param"><span class="n">values</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.MatBlock.addto_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a block of values to the <a class="reference internal" href="#pyop2.petsc_base.Mat" title="pyop2.petsc_base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.MatBlock.set_values">
<code class="sig-name descname">set_values</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">cols</span></em>, <em class="sig-param"><span class="n">values</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.MatBlock.set_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a block of values in the <a class="reference internal" href="#pyop2.petsc_base.Mat" title="pyop2.petsc_base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.MatBlock.assemble">
<code class="sig-name descname">assemble</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.MatBlock.assemble" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalise this <a class="reference internal" href="#pyop2.petsc_base.Mat" title="pyop2.petsc_base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a> ready for use.</p>
<p>Call this /after/ executing all the par_loops that write to
the matrix before you want to look at it.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.MatBlock.values">
<em class="property">property </em><code class="sig-name descname">values</code><a class="headerlink" href="#pyop2.petsc_base.MatBlock.values" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy array of matrix values.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is a dense array, so will need a lot of memory.  It’s
probably not a good idea to access this property if your
matrix has more than around 10000 degrees of freedom.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.MatBlock.dtype">
<em class="property">property </em><code class="sig-name descname">dtype</code><a class="headerlink" href="#pyop2.petsc_base.MatBlock.dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>The Python type of the data.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.MatBlock.nbytes">
<em class="property">property </em><code class="sig-name descname">nbytes</code><a class="headerlink" href="#pyop2.petsc_base.MatBlock.nbytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an estimate of the size of the data associated with this
<a class="reference internal" href="#pyop2.petsc_base.Mat" title="pyop2.petsc_base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a> in bytes. This will be the correct size of the
data payload, but does not take into account the (presumably
small) overhead of the object and its metadata. The memory
associated with the sparsity pattern is also not recorded.</p>
<p>Note that this is the process local memory usage, not the sum
over all MPI processes.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.petsc_base.Mat">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.petsc_base.</code><code class="sig-name descname">Mat</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.Mat" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Mat</span></code></a></p>
<p>OP2 matrix data. A Mat is defined on a sparsity pattern and holds a value
for each element in the <code class="xref py py-class docutils literal notranslate"><span class="pre">Sparsity</span></code>.</p>
<dl class="py attribute">
<dt id="pyop2.petsc_base.Mat.local_to_global_maps">
<code class="sig-name descname">local_to_global_maps</code><em class="property"> = (None, None)</em><a class="headerlink" href="#pyop2.petsc_base.Mat.local_to_global_maps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.Mat.zero">
<code class="sig-name descname">zero</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.Mat.zero" title="Permalink to this definition">¶</a></dt>
<dd><p>Zero the matrix.</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.Mat.zero_rows">
<code class="sig-name descname">zero_rows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">diag_val</span><span class="o">=</span><span class="default_value">1.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.Mat.zero_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Zeroes the specified rows of the matrix, with the exception of the
diagonal entry, which is set to diag_val. May be used for applying
strong boundary conditions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rows</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Subset</span></code> or an iterable</p>
</dd>
</dl>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.Mat.set_local_diagonal_entries">
<code class="sig-name descname">set_local_diagonal_entries</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">diag_val</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">idx</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.Mat.set_local_diagonal_entries" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the diagonal entry in <code class="docutils literal notranslate"><span class="pre">rows</span></code> to a particular value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rows</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Subset</span></code> or an iterable.</p></li>
<li><p><strong>diag_val</strong> – the value to add</p></li>
</ul>
</dd>
</dl>
<p>The indices in <code class="docutils literal notranslate"><span class="pre">rows</span></code> should index the process-local rows of
the matrix (no mapping to global indexes is applied).</p>
<p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.Mat.assemble">
<code class="sig-name descname">assemble</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.Mat.assemble" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.Mat.addto_values">
<code class="sig-name descname">addto_values</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">cols</span></em>, <em class="sig-param"><span class="n">values</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.Mat.addto_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a block of values to the <a class="reference internal" href="#pyop2.petsc_base.Mat" title="pyop2.petsc_base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.Mat.set_values">
<code class="sig-name descname">set_values</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">cols</span></em>, <em class="sig-param"><span class="n">values</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.Mat.set_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a block of values in the <a class="reference internal" href="#pyop2.petsc_base.Mat" title="pyop2.petsc_base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.petsc_base.Mat.blocks">
<code class="sig-name descname">blocks</code><a class="headerlink" href="#pyop2.petsc_base.Mat.blocks" title="Permalink to this definition">¶</a></dt>
<dd><p>2-dimensional array of matrix blocks.</p>
</dd></dl>

<dl class="py method">
<dt id="pyop2.petsc_base.Mat.values">
<em class="property">property </em><code class="sig-name descname">values</code><a class="headerlink" href="#pyop2.petsc_base.Mat.values" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy array of matrix values.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is a dense array, so will need a lot of memory.  It’s
probably not a good idea to access this property if your
matrix has more than around 10000 degrees of freedom.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.petsc_base.ParLoop">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.petsc_base.</code><code class="sig-name descname">ParLoop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kernel</span></em>, <em class="sig-param"><span class="n">iterset</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.ParLoop" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.ParLoop" title="pyop2.base.ParLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.ParLoop</span></code></a></p>
<dl class="py method">
<dt id="pyop2.petsc_base.ParLoop.log_flops">
<code class="sig-name descname">log_flops</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">flops</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.petsc_base.ParLoop.log_flops" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pyop2.profiling">
<span id="pyop2-profiling-module"></span><h2>pyop2.profiling module<a class="headerlink" href="#module-pyop2.profiling" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="pyop2.profiling.timed_stage">
<code class="sig-prename descclassname">pyop2.profiling.</code><code class="sig-name descname">timed_stage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.profiling.timed_stage" title="Permalink to this definition">¶</a></dt>
<dd><p>Enter a code Stage, this is a PETSc log Stage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – The name of the stage.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pyop2.profiling.timed_region">
<code class="sig-prename descclassname">pyop2.profiling.</code><code class="sig-name descname">timed_region</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.profiling.timed_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Time a code region, this a PETSc log Event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – The name of the region.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="pyop2.profiling.timed_function">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.profiling.</code><code class="sig-name descname">timed_function</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.profiling.timed_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

</div>
<div class="section" id="module-pyop2.pyparloop">
<span id="pyop2-pyparloop-module"></span><h2>pyop2.pyparloop module<a class="headerlink" href="#module-pyop2.pyparloop" title="Permalink to this headline">¶</a></h2>
<p>A stub implementation of “Python” parallel loops.</p>
<p>This basically executes a python function over the iteration set,
feeding it the appropriate data for each set entity.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">code</span><span class="o">-</span><span class="n">block</span><span class="p">::</span> <span class="n">python</span>
</pre></div>
</div>
<blockquote>
<div><blockquote>
<div><p>s = op2.Set(10)
d = op2.Dat(s)
d2 = op2.Dat(s**2)</p>
<dl class="simple">
<dt>m = op2.Map(s, s, 2, np.dstack(np.arange(4),</dt><dd><p>np.roll(np.arange(4), -1)))</p>
</dd>
<dt>def fn(x, y):</dt><dd><p>x[0] = y[0]
x[1] = y[1]</p>
</dd>
</dl>
<p>d.data[:] = np.arange(4)</p>
<p>op2.par_loop(fn, s, d2(op2.WRITE), d(op2.READ, m))</p>
<p>print d2.data
# [[ 0.  1.]
#  [ 1.  2.]
#  [ 2.  3.]
#  [ 3.  0.]]</p>
</div></blockquote>
<dl class="simple">
<dt>def fn2(x, y):</dt><dd><p>x[0] += y[0]
x[1] += y[0]</p>
</dd>
</dl>
<p>op2.par_loop(fn, s, d2(op2.INC), d(op2.READ, m[1]))</p>
<p>print d2.data
# [[ 1.  2.]
#  [ 3.  4.]
#  [ 5.  6.]
#  [ 3.  0.]]</p>
</div></blockquote>
<dl class="py class">
<dt id="pyop2.pyparloop.Kernel">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.pyparloop.</code><code class="sig-name descname">Kernel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.pyparloop.Kernel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.Kernel" title="pyop2.base.Kernel"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.Kernel</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="pyop2.pyparloop.ParLoop">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.pyparloop.</code><code class="sig-name descname">ParLoop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kernel</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.pyparloop.ParLoop" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.ParLoop" title="pyop2.base.ParLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.ParLoop</span></code></a></p>
</dd></dl>

</div>
<div class="section" id="module-pyop2.sequential">
<span id="pyop2-sequential-module"></span><h2>pyop2.sequential module<a class="headerlink" href="#module-pyop2.sequential" title="Permalink to this headline">¶</a></h2>
<p>OP2 sequential backend.</p>
<dl class="py function">
<dt id="pyop2.sequential.timed_region">
<code class="sig-prename descclassname">pyop2.sequential.</code><code class="sig-name descname">timed_region</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.sequential.timed_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Log.Event(type cls, name, klass=None)</p>
</dd></dl>

<dl class="py class">
<dt id="pyop2.sequential.JITModule">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.sequential.</code><code class="sig-name descname">JITModule</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.sequential.JITModule" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.base.JITModule" title="pyop2.base.JITModule"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.base.JITModule</span></code></a></p>
<p>A cached compiled function to execute for a specified par_loop.</p>
<p>See <a class="reference internal" href="#pyop2.base.par_loop" title="pyop2.base.par_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">par_loop()</span></code></a> for the description of arguments.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note to implementors.  This object is <em>cached</em>, and therefore
should not hold any long term references to objects that
you want to be collected.  In particular, after the
<code class="docutils literal notranslate"><span class="pre">args</span></code> have been inspected to produce the compiled code,
they <strong>must not</strong> remain part of the object’s slots,
otherwise they (and the <a class="reference internal" href="#pyop2.base.Dat" title="pyop2.base.Dat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dat</span></code></a>s, <a class="reference internal" href="#pyop2.base.Map" title="pyop2.base.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>s
and <a class="reference internal" href="#pyop2.base.Mat" title="pyop2.base.Mat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mat</span></code></a>s they reference) will never be collected.</p>
</div>
<dl class="py attribute">
<dt id="pyop2.sequential.JITModule.code_to_compile">
<code class="sig-name descname">code_to_compile</code><a class="headerlink" href="#pyop2.sequential.JITModule.code_to_compile" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyop2.sequential.JITModule.compile">
<code class="sig-name descname">compile</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.sequential.JITModule.compile" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is logically collective over MPI ranks, it is an
error to call it on fewer than all the ranks in MPI communicator.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyop2.sequential.JITModule.argtypes">
<code class="sig-name descname">argtypes</code><a class="headerlink" href="#pyop2.sequential.JITModule.argtypes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.sequential.ParLoop">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.sequential.</code><code class="sig-name descname">ParLoop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kernel</span></em>, <em class="sig-param"><span class="n">iterset</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.sequential.ParLoop" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.petsc_base.ParLoop" title="pyop2.petsc_base.ParLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.petsc_base.ParLoop</span></code></a></p>
<dl class="py method">
<dt id="pyop2.sequential.ParLoop.prepare_arglist">
<code class="sig-name descname">prepare_arglist</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterset</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.sequential.ParLoop.prepare_arglist" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare the argument list for calling generated code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iterset</strong> – The <code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code> iterated over.</p></li>
<li><p><strong>args</strong> – A list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Args</span></code>, the argument to the <a href="#id4"><span class="problematic" id="id5">:fn:`par_loop`</span></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="pyop2.sequential.generate_single_cell_wrapper">
<code class="sig-prename descclassname">pyop2.sequential.</code><code class="sig-name descname">generate_single_cell_wrapper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterset</span></em>, <em class="sig-param"><span class="n">args</span></em>, <em class="sig-param"><span class="n">forward_args</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">kernel_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wrapper_name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.sequential.generate_single_cell_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates wrapper for a single cell. No iteration loop, but cellwise data is extracted.
Cell is expected as an argument to the wrapper. For extruded, the numbering of the cells
is columnwise continuous, bottom to top.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iterset</strong> – The iteration set</p></li>
<li><p><strong>args</strong> – :class:<a href="#id6"><span class="problematic" id="id7">`</span></a>Arg`s</p></li>
<li><p><strong>forward_args</strong> – To forward unprocessed arguments to the kernel via the wrapper,
give an iterable of strings describing their C types.</p></li>
<li><p><strong>kernel_name</strong> – Kernel function name</p></li>
<li><p><strong>wrapper_name</strong> – Wrapper function name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string containing the C code for the single-cell wrapper</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyop2.sparsity">
<span id="pyop2-sparsity-module"></span><h2>pyop2.sparsity module<a class="headerlink" href="#module-pyop2.sparsity" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="pyop2.sparsity.build_sparsity">
<code class="sig-prename descclassname">pyop2.sparsity.</code><code class="sig-name descname">build_sparsity</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.sparsity.build_sparsity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="pyop2.sparsity.fill_with_zeros">
<code class="sig-prename descclassname">pyop2.sparsity.</code><code class="sig-name descname">fill_with_zeros</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.sparsity.fill_with_zeros" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill a PETSc matrix with zeros in all slots we might end up inserting into</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mat</strong> – the PETSc Mat (must already be preallocated)</p></li>
<li><p><strong>dims</strong> – the dimensions of the sparsity (block size)</p></li>
<li><p><strong>maps</strong> – the pairs of maps defining the sparsity pattern</p></li>
</ul>
</dd>
</dl>
<p>You must call <code class="docutils literal notranslate"><span class="pre">mat.assemble()</span></code> after this call.</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.sparsity.get_preallocation">
<code class="sig-prename descclassname">pyop2.sparsity.</code><code class="sig-name descname">get_preallocation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.sparsity.get_preallocation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="id8">
<h2>pyop2.sparsity module<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-0"></span><dl class="py function">
<dt id="id0">
<code class="sig-prename descclassname">pyop2.sparsity.</code><code class="sig-name descname">build_sparsity</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id9">
<code class="sig-prename descclassname">pyop2.sparsity.</code><code class="sig-name descname">fill_with_zeros</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id9" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill a PETSc matrix with zeros in all slots we might end up inserting into</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mat</strong> – the PETSc Mat (must already be preallocated)</p></li>
<li><p><strong>dims</strong> – the dimensions of the sparsity (block size)</p></li>
<li><p><strong>maps</strong> – the pairs of maps defining the sparsity pattern</p></li>
</ul>
</dd>
</dl>
<p>You must call <code class="docutils literal notranslate"><span class="pre">mat.assemble()</span></code> after this call.</p>
</dd></dl>

<dl class="py function">
<dt id="id10">
<code class="sig-prename descclassname">pyop2.sparsity.</code><code class="sig-name descname">get_preallocation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id10" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-pyop2.utils">
<span id="pyop2-utils-module"></span><h2>pyop2.utils module<a class="headerlink" href="#module-pyop2.utils" title="Permalink to this headline">¶</a></h2>
<p>Common utility classes/functions.</p>
<dl class="py class">
<dt id="pyop2.utils.cached_property">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">cached_property</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fget</span></em>, <em class="sig-param"><span class="n">doc</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.cached_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A read-only &#64;property that is only evaluated once. The value is cached
on the object itself rather than the function or class; this should prevent
memory leakage.</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.utils.as_tuple">
<code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">as_tuple</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span></em>, <em class="sig-param"><span class="n">type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">length</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">allow_none</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.as_tuple" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="pyop2.utils.as_type">
<code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">as_type</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="n">typ</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.as_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Return obj if it is of dtype typ, otherwise return a copy type-cast to
typ.</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.utils.tuplify">
<code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">tuplify</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.tuplify" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a data structure into a tuple tree.</p>
</dd></dl>

<dl class="py class">
<dt id="pyop2.utils.validate_base">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">validate_base</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">checks</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.validate_base" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Decorator to validate arguments</p>
<p>Formal parameters that don’t exist in the definition of the function
being decorated as well as actual arguments not being present when
the validation is called are silently ignored.</p>
<dl class="py method">
<dt id="pyop2.utils.validate_base.check_args">
<code class="sig-name descname">check_args</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span></em>, <em class="sig-param"><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.validate_base.check_args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.utils.validate_type">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">validate_type</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">checks</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.validate_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.utils.validate_base" title="pyop2.utils.validate_base"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.utils.validate_base</span></code></a></p>
<p>Decorator to validate argument types</p>
<p>The decorator expects one or more arguments, which are 3-tuples of
(name, type, exception), where name is the argument name in the
function being decorated, type is the argument type to be validated
and exception is the exception type to be raised if validation fails.</p>
<dl class="py method">
<dt id="pyop2.utils.validate_type.check_arg">
<code class="sig-name descname">check_arg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arg</span></em>, <em class="sig-param"><span class="n">argtype</span></em>, <em class="sig-param"><span class="n">exception</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.validate_type.check_arg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.utils.validate_in">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">validate_in</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">checks</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.validate_in" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.utils.validate_base" title="pyop2.utils.validate_base"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.utils.validate_base</span></code></a></p>
<p>Decorator to validate argument is in a set of valid argument values</p>
<p>The decorator expects one or more arguments, which are 3-tuples of
(name, list, exception), where name is the argument name in the
function being decorated, list is the list of valid argument values
and exception is the exception type to be raised if validation fails.</p>
<dl class="py method">
<dt id="pyop2.utils.validate_in.check_arg">
<code class="sig-name descname">check_arg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arg</span></em>, <em class="sig-param"><span class="n">values</span></em>, <em class="sig-param"><span class="n">exception</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.validate_in.check_arg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.utils.validate_range">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">validate_range</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">checks</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.validate_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.utils.validate_base" title="pyop2.utils.validate_base"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.utils.validate_base</span></code></a></p>
<p>Decorator to validate argument value is in a given numeric range</p>
<p>The decorator expects one or more arguments, which are 3-tuples of
(name, range, exception), where name is the argument name in the
function being decorated, range is a 2-tuple defining the valid argument
range and exception is the exception type to be raised if validation
fails.</p>
<dl class="py method">
<dt id="pyop2.utils.validate_range.check_arg">
<code class="sig-name descname">check_arg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arg</span></em>, <em class="sig-param"><span class="n">range</span></em>, <em class="sig-param"><span class="n">exception</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.validate_range.check_arg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyop2.utils.validate_dtype">
<em class="property">class </em><code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">validate_dtype</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">checks</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.validate_dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyop2.utils.validate_base" title="pyop2.utils.validate_base"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyop2.utils.validate_base</span></code></a></p>
<p>Decorator to validate argument value is in a valid Numpy dtype</p>
<p>The decorator expects one or more arguments, which are 3-tuples of
(name, _, exception), where name is the argument name in the
function being decorated, second argument is ignored and exception
is the exception type to be raised if validation fails.</p>
<dl class="py method">
<dt id="pyop2.utils.validate_dtype.check_arg">
<code class="sig-name descname">check_arg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arg</span></em>, <em class="sig-param"><span class="n">ignored</span></em>, <em class="sig-param"><span class="n">exception</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.validate_dtype.check_arg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="pyop2.utils.verify_reshape">
<code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">verify_reshape</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">dtype</span></em>, <em class="sig-param"><span class="n">shape</span></em>, <em class="sig-param"><span class="n">allow_none</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.verify_reshape" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify data is of type dtype and try to reshaped to shape.</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.utils.align">
<code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">align</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bytes</span></em>, <em class="sig-param"><span class="n">alignment</span><span class="o">=</span><span class="default_value">16</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.align" title="Permalink to this definition">¶</a></dt>
<dd><p>Align BYTES to a multiple of ALIGNMENT</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.utils.flatten">
<code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">flatten</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterable</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Flatten a given nested iterable.</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.utils.parser">
<code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">parser</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">description</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">group</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Create default argparse.ArgumentParser parser for pyop2 programs.</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.utils.parse_args">
<code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">parse_args</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.parse_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Return parsed arguments as variables for later use.</p>
<p>ARGS and KWARGS are passed into the parser instantiation.
The only recognised options are <cite>group</cite> and <cite>description</cite>.</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.utils.trim">
<code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">trim</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">docstring</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.trim" title="Permalink to this definition">¶</a></dt>
<dd><p>Trim a docstring according to <a class="reference external" href="http://www.python.org/dev/peps/pep-0257/#handling-docstring-indentation">PEP 257</a>.</p>
</dd></dl>

<dl class="py function">
<dt id="pyop2.utils.strip">
<code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">strip</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">code</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.strip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="pyop2.utils.get_petsc_dir">
<code class="sig-prename descclassname">pyop2.utils.</code><code class="sig-name descname">get_petsc_dir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyop2.utils.get_petsc_dir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-pyop2.version">
<span id="pyop2-version-module"></span><h2>pyop2.version module<a class="headerlink" href="#module-pyop2.version" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-pyop2">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pyop2" title="Permalink to this headline">¶</a></h2>
<p>PyOP2 is a library for parallel computations on unstructured meshes.</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pyop2 package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-pyop2.base">pyop2.base module</a></li>
<li><a class="reference internal" href="#module-pyop2.caching">pyop2.caching module</a></li>
<li><a class="reference internal" href="#module-pyop2.compilation">pyop2.compilation module</a></li>
<li><a class="reference internal" href="#module-pyop2.configuration">pyop2.configuration module</a></li>
<li><a class="reference internal" href="#module-pyop2.datatypes">pyop2.datatypes module</a></li>
<li><a class="reference internal" href="#module-pyop2.exceptions">pyop2.exceptions module</a></li>
<li><a class="reference internal" href="#module-pyop2.logger">pyop2.logger module</a></li>
<li><a class="reference internal" href="#module-pyop2.mpi">pyop2.mpi module</a></li>
<li><a class="reference internal" href="#module-pyop2.op2">pyop2.op2 module</a></li>
<li><a class="reference internal" href="#module-pyop2.petsc_base">pyop2.petsc_base module</a></li>
<li><a class="reference internal" href="#module-pyop2.profiling">pyop2.profiling module</a></li>
<li><a class="reference internal" href="#module-pyop2.pyparloop">pyop2.pyparloop module</a></li>
<li><a class="reference internal" href="#module-pyop2.sequential">pyop2.sequential module</a></li>
<li><a class="reference internal" href="#module-pyop2.sparsity">pyop2.sparsity module</a></li>
<li><a class="reference internal" href="#id8">pyop2.sparsity module</a></li>
<li><a class="reference internal" href="#module-pyop2.utils">pyop2.utils module</a></li>
<li><a class="reference internal" href="#module-pyop2.version">pyop2.version module</a></li>
<li><a class="reference internal" href="#module-pyop2">Module contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="user.html"
                        title="previous chapter">pyop2 user documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pyop2.codegen.html"
                        title="next chapter">pyop2.codegen package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/pyop2.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pyop2.codegen.html" title="pyop2.codegen package"
             >next</a> |</li>
        <li class="right" >
          <a href="user.html" title="pyop2 user documentation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PyOP2 2020.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">pyop2 package</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2012-2013, Imperial College et al.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.3.1.
    </div>
  </body>
</html>